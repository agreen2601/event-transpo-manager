(this["webpackJsonpfinal-capstone-react-app"]=this["webpackJsonpfinal-capstone-react-app"]||[]).push([[0],{141:function(e,t,a){e.exports=a(249)},249:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),o=a(3),i=a(10),m=a(15),u=a(300),s=a(123),d=a.n(s),h=a(100),E=a.n(h),p=a(124),f=a.n(p),v=a(126),g=a.n(v),b=a(125),y=a.n(b),C=a(301),S=a(130),j=a(101),N=a.n(j),O=function(e){var t=e.hasUser,a=e.clearUser,n=e.mode,l=e.handleModeChange,c=r.a.useState(null),s=Object(o.a)(c,2),h=s[0],p=s[1],v=function(e){p(e.currentTarget)},b=function(){p(null)};return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/",style:{textDecoration:"none"}},!1===n?r.a.createElement("span",{className:"nav-header",onClick:l},"Switch to Manager"):r.a.createElement("span",{className:"nav-header",onClick:l},"Switch to Tracker")),r.a.createElement(u.a,{align:"right"},!1===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nav-icon"},r.a.createElement(i.b,{to:"/log"},r.a.createElement(E.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(i.b,{to:"/graph"},r.a.createElement(d.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(i.b,{to:"/entry/form"},r.a.createElement(f.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(N.a,{style:{fontSize:30},color:"action","aria-haspopup":"true","aria-controls":"lock-menu",onClick:v}),r.a.createElement(S.a,{id:"lock-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:b},r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/login",onClick:a,style:{textDecoration:"none"}},"Logout"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nav-icon"},r.a.createElement(i.b,{to:"/driver/list"},r.a.createElement(E.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(i.b,{to:"/route/view"},r.a.createElement(y.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),!0===e.isSupervisor||!0===e.isStaff?r.a.createElement("span",{className:"nav-icon"},r.a.createElement(i.b,{to:"/driver/form"},r.a.createElement(g.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))):null,r.a.createElement("span",{className:"nav-icon"},r.a.createElement(N.a,{style:{fontSize:30},color:"action","aria-haspopup":"true","aria-controls":"lock-menu",onClick:v}),r.a.createElement(S.a,{id:"lock-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:b},!0===e.isSupervisor||!0===e.isStaff?r.a.createElement("div",null,r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/date/form",style:{textDecoration:"none"}},"Add Date")),r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/shuttle/form",style:{textDecoration:"none"}},"Add Shuttle")),r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/route/form",style:{textDecoration:"none"}},"Add Route")),r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/location/form",style:{textDecoration:"none"}},"Add Location")),r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/vehicle/form",style:{textDecoration:"none"}},"Add Vehicle")),r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/staff/list",style:{textDecoration:"none"}},"Staff List")),r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/login",onClick:a,style:{textDecoration:"none"}},"Logout"))):r.a.createElement(C.a,{onClick:b},r.a.createElement(i.b,{to:"/login",onClick:a,style:{textDecoration:"none"}},"Logout"))))))):r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/login"})}}))},_=a(9),x=a(284),I=a(288),k=a(299),D=a(302),F=a(298),W=a(251),w=a(287),R=a(297),L="http://localhost:8000",A=function(e){return fetch("".concat(L,"/").concat(e)).then((function(e){return e.json()}))},q=function(e,t){return fetch("".concat(L,"/").concat(e,"/").concat(t)).then((function(e){return e.json()}))},M=function(e,t,a){return fetch("".concat(L,"/").concat(e,"?").concat(t,"=").concat(a)).then((function(e){return e.json()}))},P=function(e,t){return fetch("".concat(L,"/assignments?dateID=").concat(e,"&routeID=").concat(t)).then((function(e){return e.json()}))},T=function(e,t){return fetch("".concat(L,"/assignments?dateID=").concat(e,"&driverID=").concat(t)).then((function(e){return e.json()}))},z=function(e,t){return fetch("".concat(L,"/").concat(e),{method:"POST",headers:{"content-type":"application/json",Accept:"application/json",Authorization:"Token ".concat(window.sessionStorage.getItem("token"))},body:JSON.stringify(t)}).then((function(e){return e.json()}))},B=function(e,t){return fetch("".concat(L,"/").concat(e,"/").concat(t.id),{method:"PUT",headers:{"content-type":"application/json",Accept:"application/json",Authorization:"Token ".concat(window.sessionStorage.getItem("token"))},body:JSON.stringify(t)})},V=function(e,t){return fetch("".concat(L,"/").concat(e,"/").concat(t),{method:"DELETE"})},U=function(e){return fetch("".concat(L,"/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},H=function(e){return fetch("".concat(L,"/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},J=a(40),Y=a.n(J),G=function(e){var t=e.places,a=e.routes,l=e.shuttles,c=e.dates,i=e.chosenPlaceId,m=e.chosenRoute,u=e.chosenShuttleId,s=e.chosenDateId,d=e.handleChosenPlaceChange,h=e.handleChosenRouteChange,E=e.handleChosenShuttleChange,p=e.handleChosenDateChange,f=Object(n.useState)({attendee_count:"",vehicle_number:"",time:Y()().format("HH:mm")}),v=Object(o.a)(f,2),g=v[0],b=v[1];g.place_id=i,g.shuttle_id=u;var y=Object(n.useState)(!1),C=Object(o.a)(y,2),S=C[0],j=C[1],N=c.find((function(e){return e.date===Y()().format("YYYY-MM-DD")}));void 0!==N?g.date_id=N.id:S=!0;var O=function(e){var t=Object(_.a)({},g);t[e.target.id]=e.target.value,b(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Entry Form"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),!1===S?(g.date_id=N.id,g.time=Y()().format("HH:mm")):g.date_id=s,setTimeout((function(){z("entries",g).then((function(){document.getElementById("attendee_count").value="",document.getElementById("vehicle_number").value="",!0===S&&(document.getElementById("time").value=""),b({attendee_count:"",vehicle_number:"",time:""})}))}),100),alert("Success!")}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Shuttle:"),r.a.createElement(F.a,{id:"shuttle_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:u},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Shuttle"),l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:h,fullWidth:!0,required:!0,value:m},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Location:"),r.a.createElement(F.a,{id:"place_id",native:!0,onChange:d,fullWidth:!0,required:!0,value:i},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Location"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Attendee Count:"," "),r.a.createElement(k.a,{required:!0,type:"number",id:"attendee_count",fullWidth:!0,onChange:O})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Vehicle Number:"," "),r.a.createElement(k.a,{id:"vehicle_number",fullWidth:!0,onChange:O})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:S,onChange:function(){j(!S)},color:"primary"}),label:"NOT LIVE? Click if not live to input past date and/or time."})),!0===S?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:p,fullWidth:!0,required:!0,value:s},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),c?c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Time: "),r.a.createElement(k.a,{id:"time",type:"time",fullWidth:!0,required:!0,onChange:O}))):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},K=function(e){var t=e.shuttles,a=e.dates,l=Object(n.useState)({attendee_count:"",vehicle_number:"",time:""}),c=Object(o.a)(l,2),i=c[0],m=c[1],u=Object(n.useState)([]),s=Object(o.a)(u,2),d=s[0],h=s[1],E=function(e){var t=Object(_.a)({},i);t[e.target.id]=e.target.value,m(t)};Object(n.useEffect)((function(){q("entries",e.match.params.entryId).then((function(e){m(e)})),A("places").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),h(e)}))}),[e.match.params.entryId]);var p={id:parseInt(e.match.params.entryId),shuttle_id:i.shuttle_id,date_id:i.date_id,place_id:i.place_id,user_id:i.user_id,attendee_count:i.attendee_count,vehicle_number:i.vehicle_number,time:i.time};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"event-form-page"},r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Entry"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),B("entries",p).then((function(){e.history.push("/log")}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Event:"),r.a.createElement(F.a,{id:"shuttle_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:i.shuttle_id},t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Location:"),r.a.createElement(F.a,{id:"place_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:i.place_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Location"),d?d.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:i.date_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Time: "),r.a.createElement(k.a,{id:"time",type:"time",fullWidth:!0,value:i.time,onChange:E})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Attendee Count:"," "),r.a.createElement(k.a,{required:!0,type:"number",id:"attendee_count",fullWidth:!0,onChange:E,value:i.attendee_count})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Vehicle Number:"," "),r.a.createElement(k.a,{id:"vehicle_number",fullWidth:!0,value:i.vehicle_number,onChange:E}))),r.a.createElement(x.a,null,r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))))},Q=a(42),X=a(43),Z=function(e){var t=e.filteredEntries,a=e.accumulated,n=e.xRange,l=e.timeSpanIntervals;var c=0;return 0!==t.length&&(c=t.map((function(e){return e.attendee_count})).reduce((function(e,t){return e+t}))),r.a.createElement("div",{className:"graph_border"},r.a.createElement(X.Bar,{data:{labels:l.map((function(e){return e})),datasets:[{backgroundColor:"black",borderColor:"black",data:l.map((function(e){return function(e){var t,n=Object(Q.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r.x)return r.y}}catch(l){n.e(l)}finally{n.f()}return 0}(e)}))}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!0,ticks:{maxTicksLimit:n}}],yAxes:[{display:!0}]}}}),r.a.createElement(W.a,{align:"center"},"All Routes"),r.a.createElement(W.a,{align:"center"},c," attendees moved in ",t.length," trips"))},$=function(e){for(var t=e.filteredEntries,a=e.route,n=e.times,l=e.counts,c=e.xRange,o=e.timeSpanIntervals,i=e.yMax,m=t.filter((function(e){return e.z.includes(a.name)})),u=[],s=0;s<t.length;s++)t[s].z.includes(a.name)?u.push({x:"".concat(n[s],"0"),y:l[s]}):u.push({x:"".concat(n[s],"0"),y:0});var d={};u.forEach((function(e){d.hasOwnProperty(e.x)?d[e.x]=d[e.x]+e.y:d[e.x]=e.y}));var h=[];for(var E in d)h.push({x:E,y:d[E]});var p="";p=parseInt(a.name)<10?a.name.slice(1):a.name;var f=0;return 0!==m.length&&(f=m.map((function(e){return e.y})).reduce((function(e,t){return e+t}))),r.a.createElement(r.a.Fragment,null,0!==f?r.a.createElement("div",{className:"places_graph_border"},r.a.createElement(X.Bar,{data:{labels:o.map((function(e){return e})),datasets:[{backgroundColor:a.color,borderColor:"black",borderWidth:.5,data:o.map((function(e){return function(e){var t,a=Object(Q.a)(h);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e===n.x)return n.y}}catch(r){a.e(r)}finally{a.f()}return 0}(e)}))}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!0,ticks:{maxTicksLimit:c}}],yAxes:[{display:!0,ticks:{suggestedMax:i}}]}}}),!0===isNaN(a.name)?r.a.createElement(W.a,{align:"center"},p," ",a.description):r.a.createElement(W.a,{align:"center"},"Route ",p," ",a.description),r.a.createElement(W.a,{align:"center"},f," attendees moved in ",m.length," trips")):r.a.createElement("div",{className:"places_graph_border",style:{padding:"20px 0 20px 0"}},!0===isNaN(a.name)?r.a.createElement(W.a,{align:"center"},"There is no ridership data for ",p," ",a.description):r.a.createElement(W.a,{align:"center"},"There is no ridership data for Route ",p," ",a.description)))},ee=function(e){for(var t=e.filteredEntries,a=e.place,n=e.times,l=e.counts,c=e.xRange,o=e.timeSpanIntervals,i=e.yMax,m=t.filter((function(e){return e.z.includes(a.name)})),u=[],s=0;s<t.length;s++)t[s].z.includes(a.name)?u.push({x:"".concat(n[s],"0"),y:l[s]}):u.push({x:"".concat(n[s],"0"),y:0});var d={};u.forEach((function(e){d.hasOwnProperty(e.x)?d[e.x]=d[e.x]+e.y:d[e.x]=e.y}));var h=[];for(var E in d)h.push({x:E,y:d[E]});var p=0;0!==m.length&&(p=m.map((function(e){return e.y})).reduce((function(e,t){return e+t})));return r.a.createElement(r.a.Fragment,null,0!==p?r.a.createElement("div",{className:"places_graph_border",onClick:function(){document.getElementById("".concat(a.id)).classList.remove("graph_border")},id:a.id},r.a.createElement(X.Bar,{data:{labels:o.map((function(e){return e})),datasets:[{backgroundColor:a.route.color,borderColor:"black",borderWidth:.5,data:o.map((function(e){return function(e){var t,a=Object(Q.a)(h);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e===n.x)return n.y}}catch(r){a.e(r)}finally{a.f()}return 0}(e)}))}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!0,ticks:{maxTicksLimit:c}}],yAxes:[{display:!0,ticks:{suggestedMax:i}}]}}}),r.a.createElement(W.a,{align:"center"},a.name),r.a.createElement(W.a,{align:"center"},p," attendees moved in ",m.length," trips")):r.a.createElement("div",{className:"places_graph_border",style:{padding:"20px 0 20px 0"}},r.a.createElement(W.a,{align:"center",style:{marginTop:40}},"There is no ridership data for ",a.name)))},te=function(e){for(var t=e.routes,a=e.shuttles,l=e.dates,c=e.chosenShuttleId,i=e.chosenShuttleName,m=e.chosenDateId,u=e.chosenDateName,s=e.handleChosenShuttleChange,d=e.handleChosenDateChange,h=e.entries,E=e.getEntries,p=Object(n.useState)([]),f=Object(o.a)(p,2),v=f[0],g=f[1],b=h.filter((function(e){return e.shuttle.name.includes(i)})).filter((function(e){return e.date.date.includes(u)})).sort((function(e,t){return e.time.localeCompare(t.time)})),y=b.map((function(e){return e.time.slice(0,4)})),C=b.map((function(e){return e.attendee_count})),S=b.map((function(e){return e.place.route.name})),j=b.map((function(e){return e.place_id})),N=b.map((function(e){return e.place.name})),O=[],_=[],k=[],w=0;w<b.length;w++)O.push({x:"".concat(y[w],"0"),y:C[w]}),_.push({x:"".concat(y[w]).concat(S[w]),y:C[w],z:S[w]}),k.push({x:"".concat(y[w]).concat(j[w]),y:C[w],z:N[w]});var R={},L={},q={};O.forEach((function(e){R.hasOwnProperty(e.x)?R[e.x]=R[e.x]+e.y:R[e.x]=e.y})),_.forEach((function(e){L.hasOwnProperty(e.x)?L[e.x]=L[e.x]+e.y:L[e.x]=e.y})),k.forEach((function(e){q.hasOwnProperty(e.x)?q[e.x]=q[e.x]+e.y:q[e.x]=e.y}));var M=[],P=[],T=[];for(var z in R)M.push({x:z,y:R[z]});for(var B in L)P.push({x:B,y:L[B]});for(var V in q)T.push({x:V,y:q[V]});var U="",H="";0!==M.length&&(U=parseInt(M[0].x),H=parseInt(M[M.length-1].x)+1);for(var J=2*(H-U+1),Y=H-U+1,G=[],K=U;K<H;K++)for(var Q=0;Q<6;Q++)K<10?G.push("0".concat(K,":").concat(Q,"0")):G.push("".concat(K,":").concat(Q,"0"));var X,te;X=Math.max.apply(Math,P.map((function(e){return e.y}))),te=Math.max.apply(Math,T.map((function(e){return e.y}))),Object(n.useEffect)((function(){E(),A("places").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),g(e)}))}),[]);var ae=Object(n.useState)(!0),ne=Object(o.a)(ae,2),re=ne[0],le=ne[1],ce=function(){le(!re)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Ridership Graphs"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"dateId",native:!0,onChange:d,fullWidth:!0,required:!0,label:"??",value:m},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Shuttle:"),r.a.createElement(F.a,{id:"shuttleId",native:!0,onChange:s,fullWidth:!0,required:!0,label:"??",value:c},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Shuttles"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))))),0!==b.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"graph"},r.a.createElement(Z,Object.assign({filteredEntries:b,accumulated:M,xRange:J,timeSpanIntervals:G},e))),r.a.createElement("div",{style:{marginBottom:40}},!0===re?r.a.createElement(I.a,{onClick:ce,variant:"contained",color:"primary"},"View Location Graphs"):r.a.createElement(I.a,{onClick:ce,variant:"contained",color:"primary"},"View Route Graphs")),!0===re?r.a.createElement("div",{className:"places_graph"},t.map((function(t){return r.a.createElement($,Object.assign({key:t.id,route:t,filteredEntries:_,times:y,counts:C,chosenDateName:u,chosenShuttleName:i,xRange:Y,timeSpanIntervals:G,yMax:X},e))}))):r.a.createElement("div",{className:"places_graph"},v.sort((function(e,t){return e.route.name.localeCompare(t.route.name)})).map((function(t){return r.a.createElement(ee,Object.assign({key:t.id,place:t,filteredEntries:k,times:y,counts:C,chosenDateName:u,chosenShuttleName:i,xRange:Y,timeSpanIntervals:G,yMax:te},e))})))):r.a.createElement(W.a,{align:"center"},"There is no ridership data for ",i,""!==u?r.a.createElement(r.a.Fragment,null," on ",u):null))},ae=a(290),ne=a(294),re=a(293),le=a(289),ce=a(291),oe=a(292),ie=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],i=l.filter((function(t){return t.vehicle.number.includes(e.match.params.vehNum)}));return Object(n.useEffect)((function(){M("assignments","dateID",e.match.params.dateId).then((function(e){c(e)}))}),[e.match.params.dateId]),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Possible Matches"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(re.a,null,"Vehicle Company"),r.a.createElement(re.a,null,"Vehicle Number"),r.a.createElement(re.a,null,"Driver Name"),r.a.createElement(re.a,null,"Phone Number"),r.a.createElement(re.a,null,"Route"))),0!==i.length?r.a.createElement(ne.a,null,i.map((function(e){return r.a.createElement(oe.a,{key:e.id},r.a.createElement(re.a,null,e.vehicle.company),r.a.createElement(re.a,null,e.vehicle.number),r.a.createElement(re.a,null,e.driver.name),r.a.createElement(re.a,null,e.driver.phone_number),r.a.createElement(re.a,null,e.route.name," ",e.route.description))}))):null)))},me=a(127),ue=a.n(me),se=a(28),de=a(24),he=a.n(de),Ee=function(e){var t=e.places,a=e.routes,l=e.shuttles,c=e.dates,i=e.chosenPlaceId,m=e.chosenPlaceName,u=e.chosenRoute,s=e.chosenShuttleId,d=e.chosenShuttleName,h=e.chosenDateId,E=e.chosenDateName,p=e.handleChosenPlaceChange,f=e.handleChosenRouteChange,v=e.handleChosenShuttleChange,g=e.handleChosenDateChange,b=e.entries,y=e.getEntries,C=Object(n.useState)(""),S=Object(o.a)(C,2),j=S[0],N=S[1],O=b.filter((function(e){return e.shuttle.name.includes(d)})).filter((function(e){return e.place.name.includes(m)})).filter((function(e){return e.place.route.name.includes(u)})).filter((function(e){return e.date.date.includes(E)})).filter((function(e){return e.vehicle_number.includes(j)||e.time.includes(j)||e.attendee_count.toString().includes(j)||e.user.first_name.toLowerCase().includes(j)||e.user.last_name.toLowerCase().includes(j)})).sort((function(e,t){return e.time.localeCompare(t.time)})).sort((function(e,t){return e.date.date.localeCompare(t.date.date)})),_=Object(n.useState)(null),I=Object(o.a)(_,2),w=I[0],R=I[1];"time"===w?O.sort((function(e,t){return e.time.localeCompare(t.time)})):"vehicle"===w?O.sort((function(e,t){return e.vehicle_number.localeCompare(t.vehicle_number)})):"date"===w?O.sort((function(e,t){return e.date.date.localeCompare(t.date.date)})):"shuttle"===w?O.sort((function(e,t){return e.shuttle.name.localeCompare(t.shuttle.name)})):"route"===w?O.sort((function(e,t){return e.place.route.name.localeCompare(t.place.route.name)})):"location"===w?O.sort((function(e,t){return e.place.name.localeCompare(t.place.name)})):"user"===w&&O.sort((function(e,t){return e.user.first_name.localeCompare(t.user.first_name)}));var L=0;0!==O.length&&(L=O.map((function(e){return e.attendee_count})).reduce((function(e,t){return e+t})));Object(n.useEffect)((function(){y()}),[]);var A={fontSize:20,paddingBottom:2},q=Object(n.useState)(null),M=Object(o.a)(q,2),P=M[0],T=M[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Ridership Logs"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"dateId",native:!0,onChange:g,fullWidth:!0,required:!0,value:h},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Dates"),c?c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Shuttle:"),r.a.createElement(F.a,{id:"shuttleId",native:!0,onChange:v,fullWidth:!0,required:!0,value:s},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Shuttles"),l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:f,fullWidth:!0,required:!0,value:u},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Location:"),r.a.createElement(F.a,{id:"placeId",native:!0,onChange:p,fullWidth:!0,required:!0,value:i},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Locations"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Search:"),r.a.createElement(k.a,{type:"text",id:"keyword",fullWidth:!0,onChange:function(e){N(e.target.value.toLowerCase())},value:j})))),r.a.createElement(W.a,{variant:"h6"},L," attendees moved in ",O.length," trips"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("time")},onMouseEnter:function(){return T("time")},onMouseLeave:function(){return T("")}},"Time ","time"===P?r.a.createElement(he.a,null):null),r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("vehicle")},onMouseEnter:function(){return T("vehicle")},onMouseLeave:function(){return T("")}},"Vehicle # ","vehicle"===P?r.a.createElement(he.a,null):null),r.a.createElement(re.a,{style:{fontWeight:600}},"Pax"),""===h?r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("date")},onMouseEnter:function(){return T("date")},onMouseLeave:function(){return T("")}},"Date ","date"===P?r.a.createElement(he.a,null):null):null,""===s?r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("shuttle")},onMouseEnter:function(){return T("shuttle")},onMouseLeave:function(){return T("")}},"Shuttle ","shuttle"===P?r.a.createElement(he.a,null):null):null,""===u?r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("route")},onMouseEnter:function(){return T("route")},onMouseLeave:function(){return T("")}},"Rt ","route"===P?r.a.createElement(he.a,null):null):null,""===i?r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("location")},onMouseEnter:function(){return T("location")},onMouseLeave:function(){return T("")}},"Location ","location"===P?r.a.createElement(he.a,null):null):null,r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return R("user")},onMouseEnter:function(){return T("user")},onMouseLeave:function(){return T("")}},"Entered By ","user"===P?r.a.createElement(he.a,null):null),r.a.createElement(re.a,{style:{fontWeight:600}},"Actions"))),r.a.createElement(ne.a,null,O.map((function(t){return r.a.createElement(oe.a,{key:t.id,className:"table_rows"},r.a.createElement(re.a,{component:"th",scope:"entry"},t.time.slice(0,-3)),r.a.createElement(re.a,{style:{textDecoration:"underline"},className:"action-icon",onClick:function(){return e.history.push("/assignment/finder/".concat(t.date_id,"/").concat(t.vehicle_number))}},t.vehicle_number),r.a.createElement(re.a,null,t.attendee_count),""===h?r.a.createElement(re.a,null,t.date.date.slice(5)):null,""===s?r.a.createElement(re.a,null,t.shuttle.name):null,""===u?r.a.createElement(r.a.Fragment,null,parseInt(t.place.route.name)<10?r.a.createElement(re.a,null,t.place.route.name.slice(1)):r.a.createElement(re.a,null,t.place.route.name)):null,""===i?r.a.createElement(re.a,null,t.place.name):null,r.a.createElement(re.a,null,t.user.first_name," ",t.user.last_name),r.a.createElement(re.a,null,!0===e.isSupervisor||parseInt(window.sessionStorage.getItem("userID"))===t.user_id?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"action-icon"},r.a.createElement(se.b,{onClick:function(){return e.history.push("/entry/edit/form/".concat(t.id))},style:A})),r.a.createElement("span",{className:"action-icon"},r.a.createElement(ue.a,{onClick:function(){return e=t.id,void(!0===window.confirm("Are you sure you want to delete this entry? Deletion cannot be undone.")&&V("entries",e).then((function(){y()})));var e}}))):null))}))))))},pe=function(e){var t=e.hasUser,a=e.isSupervisor,n=e.dates,l=e.shuttles,c=e.routes,o=e.places,i=e.entries,u=e.chosenDateId,s=e.chosenDateName,d=e.chosenShuttleId,h=e.chosenShuttleName,E=e.chosenRoute,p=e.chosenPlaceId,f=e.chosenPlaceName,v=e.getEntries,g=e.handleChosenPlaceChange,b=e.handleChosenRouteChange,y=e.handleChosenShuttleChange,C=e.handleChosenDateChange;return r.a.createElement("span",null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/log"})}}),r.a.createElement(m.b,{exact:!0,path:"/entry/form",render:function(e){return t?r.a.createElement(G,Object.assign({places:o,routes:c,shuttles:l,dates:n,chosenPlaceId:p,chosenRoute:E,chosenShuttleId:d,chosenDateId:u,handleChosenPlaceChange:g,handleChosenRouteChange:b,handleChosenShuttleChange:y,handleChosenDateChange:C},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/entry/edit/form/:entryId(\\d+)",render:function(e){return t?r.a.createElement(K,Object.assign({places:o,routes:c,shuttles:l,dates:n,chosenPlaceId:p,chosenRoute:E,handleChosenPlaceChange:g,handleChosenRouteChange:b},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/log",render:function(e){return t?r.a.createElement(Ee,Object.assign({isSupervisor:a,getEntries:v,dates:n,shuttles:l,routes:c,places:o,entries:i,chosenPlaceId:p,chosenPlaceName:f,chosenRoute:E,chosenShuttleId:d,chosenShuttleName:h,chosenDateId:u,chosenDateName:s,handleChosenPlaceChange:g,handleChosenRouteChange:b,handleChosenShuttleChange:y,handleChosenDateChange:C},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/graph",render:function(e){return t?r.a.createElement(te,Object.assign({getEntries:v,dates:n,shuttles:l,routes:c,places:o,entries:i,chosenPlaceId:p,chosenPlaceName:f,chosenRoute:E,chosenShuttleId:d,chosenShuttleName:h,chosenDateId:u,chosenDateName:s,handleChosenPlaceChange:g,handleChosenRouteChange:b,handleChosenShuttleChange:y,handleChosenDateChange:C},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/finder/:dateId(\\d+)/:vehNum(\\d+)",render:function(e){return t?r.a.createElement(ie,e):r.a.createElement(m.a,{to:"/login"})}}))},fe=function(e){var t=e.getDates,a=Object(n.useState)({date:""}),l=Object(o.a)(a,2),c=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Date"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),z("dates",c).then((function(){document.getElementById("date").value="",i({date:""}),t()})),alert("Success!")}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Date: "),r.a.createElement(k.a,{id:"date",type:"date",fullWidth:!0,onChange:function(e){var t=Object(_.a)({},c);t[e.target.id]=e.target.value,i(t)}}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},ve=function(e){var t=e.getShuttles,a=Object(n.useState)({name:""}),l=Object(o.a)(a,2),c=l[0],i=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Shuttle"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),z("shuttles",c).then((function(){document.getElementById("name").value="",i({name:""}),t()})),alert("Success!")}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(k.a,{id:"name",required:!0,fullWidth:!0,onChange:function(e){var t=Object(_.a)({},c);t[e.target.id]=e.target.value,i(t)}}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},ge=function(e){var t=e.getRoutes,a=Object(n.useState)({name:"",color:"",description:""}),l=Object(o.a)(a,2),c=l[0],i=l[1],m=function(e){var t=Object(_.a)({},c);t[e.target.id]=e.target.value,i(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Route"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),z("routes",c).then((function(){document.getElementById("name").value="",document.getElementById("color").value="",document.getElementById("description").value="",i({name:"",color:"",description:""}),t()})),alert("Success!")}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(k.a,{id:"name",fullWidth:!0,required:!0,onChange:m})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Color: "),r.a.createElement(k.a,{id:"color",fullWidth:!0,required:!0,onChange:m})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Description: "),r.a.createElement(k.a,{id:"description",fullWidth:!0,required:!0,onChange:m}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},be=function(e){var t=e.getPlaces,a=e.routes,l=Object(n.useState)({name:""}),c=Object(o.a)(l,2),i=c[0],m=c[1],u=Object(n.useState)(""),s=Object(o.a)(u,2),d=s[0],h=s[1];i.route_id=d;return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Location"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),z("places",i).then((function(){document.getElementById("name").value="",m({name:""}),t()})),alert("Success!")}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(k.a,{id:"name",fullWidth:!0,required:!0,onChange:function(e){var t=Object(_.a)({},i);t[e.target.id]=e.target.value,m(t)}})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"id",native:!0,onChange:function(e){var t=e.target.value;h(t)},fullWidth:!0,required:!0,value:d},r.a.createElement("option",{"aria-label":"None",value:""},"Choose Route"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null)))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},ye=function(e){var t=Object(n.useState)({name:"",phone_number:"",notes:""}),a=Object(o.a)(t,2),l=a[0],c=a[1],m=Object(n.useState)(!1),u=Object(o.a)(m,2),s=u[0],d=u[1],h=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Driver"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),A("drivers").then((function(t){l.isLocal=s,void 0===t.find((function(e){return e.name===l.name}))?(z("drivers",l).then((function(t){return e.setDriverId(t.id)})),e.history.push("/vehicle/form")):alert("Driver already in database.")}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(k.a,{id:"name",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Phone Number: "),r.a.createElement(k.a,{id:"phone_number",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Notes: "),r.a.createElement(k.a,{id:"notes",fullWidth:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:s,onChange:function(){d(!s)},color:"primary"}),label:"Local driver?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(i.b,{to:"/vehicle/form",style:{textDecoration:"none"}},r.a.createElement(I.a,{variant:"contained",color:"primary"},"Skip")))))},Ce=function(e){var t=Object(n.useState)({name:"",phone_number:"",notes:"",isLocal:Boolean,area:"",area_id:""}),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],s=m[1];Object(n.useEffect)((function(){q("drivers",e.match.params.driverId).then((function(e){c(e),s(e.isLocal),console.log(e)}))}),[e.match.params.driverId]);var d=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)},h={id:e.match.params.driverId,name:l.name,phone_number:l.phone_number,isLocal:u,notes:l.notes,area:l.area,area_id:l.area_id};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Driver Info"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){console.log(h),t.preventDefault(),B("drivers",h).then((function(){return e.history.push("/vehicle/edit/".concat(e.match.params.driverId,"/").concat(e.match.params.vehicleId))}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(k.a,{id:"name",fullWidth:!0,required:!0,onChange:d,value:l.name})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Phone Number: "),r.a.createElement(k.a,{id:"phone_number",fullWidth:!0,required:!0,onChange:d,value:l.phone_number})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Notes: "),r.a.createElement(k.a,{id:"notes",fullWidth:!0,onChange:d,value:l.notes})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:u,onChange:function(){s(!u)},color:"primary"}),label:"Local driver?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/vehicle/edit/".concat(e.match.params.driverId,"/").concat(e.match.params.vehicleId))}},"Skip"))))},Se=function(e){var t=Object(n.useState)({company:"",number:"",kind:"",capacity:""}),a=Object(o.a)(t,2),l=a[0],c=a[1],m=Object(n.useState)(!1),u=Object(o.a)(m,2),s=u[0],d=u[1],h=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Vehicle"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),A("vehicles").then((function(t){l.isAda=s,void 0===t.find((function(e){return e.company===l.company&&e.number===l.number}))?z("vehicles",l).then((function(t){return e.setVehicleId(t.id)})):alert("Vehicle already in database."),setTimeout((function(){e.history.push("/assignment/form")}),100)}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Company: "),r.a.createElement(k.a,{id:"company",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Number: "),r.a.createElement(k.a,{id:"number",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Type: "),r.a.createElement(k.a,{id:"kind",fullWidth:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Capacity: "),r.a.createElement(k.a,{id:"capacity",fullWidth:!0,onChange:h})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:s,onChange:function(){d(!s)},color:"primary"}),label:"ADA vehicle?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(i.b,{to:"/assignment/form",style:{textDecoration:"none"}},r.a.createElement(I.a,{variant:"contained",color:"primary"},"Skip")))))},je=function(e){var t=Object(n.useState)({company:"",number:"",kind:"",capacity:"",isAda:Boolean}),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],s=m[1];Object(n.useEffect)((function(){q("vehicles",e.match.params.vehicleId).then((function(e){c(e),s(e.isAda)}))}),[e.match.params.vehicleId]);var d=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)},h={id:e.match.params.vehicleId,company:l.company,number:l.number,kind:l.kind,capacity:l.capacity,isAda:u};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Vehicle Info"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),B("vehicles",h).then((function(){return e.history.push("/route/view")}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Company: "),r.a.createElement(k.a,{id:"company",fullWidth:!0,required:!0,onChange:d,value:l.company})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Number: "),r.a.createElement(k.a,{id:"number",fullWidth:!0,required:!0,onChange:d,value:l.number})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Type: "),r.a.createElement(k.a,{id:"kind",fullWidth:!0,onChange:d,value:l.kind})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Capacity: "),r.a.createElement(k.a,{id:"capacity",fullWidth:!0,onChange:d,value:l.capacity})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:u,onChange:function(){s(!u)},color:"primary"}),label:"ADA vehicle?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/route/view")}},"Skip"))))},Ne=function(e){var t=e.chosenDate,a=e.handleChosenDateChange,l=Object(n.useState)({start_time:Y()().format("HH:mm"),end_time:"23:59",vehicle_id:e.vehicleId,driver_id:e.driverId,route_id:""}),c=Object(o.a)(l,2),i=c[0],m=c[1];i.date_id=t;var u=Object(n.useState)([]),s=Object(o.a)(u,2),d=s[0],h=s[1],E=Object(n.useState)([]),p=Object(o.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)([]),b=Object(o.a)(g,2),y=b[0],C=b[1],S=Object(n.useState)([]),j=Object(o.a)(S,2),N=j[0],O=j[1],w=function(e){var t=Object(_.a)({},i);t[e.target.id]=e.target.value,m(t)};Object(n.useEffect)((function(){A("dates").then((function(e){e.sort((function(e,t){return e.date>t.date?1:-1})),h(e)})),A("routes").then((function(e){e.sort((function(e,t){return e.name>t.name?1:-1})),v(e)})),A("drivers").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),C(e)})),A("vehicles").then((function(e){e.sort((function(e,t){return e.number>t.number?1:-1})).sort((function(e,t){return e.company.localeCompare(t.company)})),O(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Create New Assignment"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),T(i.date_id,i.driver_id).then((function(t){t.length>0?alert("This driver has already been assigned on this day."):z("assignments",i).then((function(){return e.history.push("/route/view")}))}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Driver:"),r.a.createElement(F.a,{id:"driver_id",native:!0,onChange:w,fullWidth:!0,required:!0,value:i.driver_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Driver"),y?y.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Vehicle:"),r.a.createElement(F.a,{id:"vehicle_id",native:!0,onChange:w,fullWidth:!0,required:!0,value:i.vehicle_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Vehicle"),N?N.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.company," ",e.number)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"route_id",native:!0,onChange:w,fullWidth:!0,required:!0},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Route"),f?f.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:a,fullWidth:!0,required:!0,value:t},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),d?d.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Start Time: "),r.a.createElement(k.a,{id:"start_time",type:"time",fullWidth:!0,value:i.start_time,onChange:w})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"End Time: "),r.a.createElement(k.a,{id:"end_time",type:"time",fullWidth:!0,value:i.end_time,onChange:w}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},Oe=function(e){var t=e.chosenDate,a=e.handleChosenDateChange,l=Object(n.useState)({start_time:Y()().format("HH:mm"),end_time:"23:59"}),c=Object(o.a)(l,2),i=c[0],m=c[1];i.route_id=e.match.params.routeId,i.date_id=t;var u=Object(n.useState)([]),s=Object(o.a)(u,2),d=s[0],h=s[1],E=Object(n.useState)([]),p=Object(o.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)([]),b=Object(o.a)(g,2),y=b[0],C=b[1],S=Object(n.useState)([]),j=Object(o.a)(S,2),N=j[0],O=j[1],w=function(e){var t=Object(_.a)({},i);t[e.target.id]=e.target.value,m(t)};Object(n.useEffect)((function(){A("dates").then((function(e){e.sort((function(e,t){return e.date>t.date?1:-1})),v(e)})),A("drivers").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),C(e)})),A("vehicles").then((function(e){e.sort((function(e,t){return e.number>t.number?1:-1})).sort((function(e,t){return e.company.localeCompare(t.company)})),O(e)})),q("routes",e.match.params.routeId).then((function(e){return h(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Create New Assignment for"," ",r.a.createElement("span",{style:{color:d.color}},"Route ",d.name," ",d.description)),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),T(i.date_id,i.driver_id).then((function(t){t.length>0?alert("This driver has already been assigned on this day."):z("assignments",i).then((function(){return e.history.push("/route/view")}))}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:a,fullWidth:!0,required:!0,value:t},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),f?f.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Driver:"),r.a.createElement(F.a,{id:"driver_id",native:!0,onChange:w,fullWidth:!0,required:!0},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Driver"),y?y.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Vehicle:"),r.a.createElement(F.a,{id:"vehicle_id",native:!0,onChange:w,fullWidth:!0,required:!0},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Vehicle"),N?N.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.company," ",e.number)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Start Time: "),r.a.createElement(k.a,{id:"start_time",type:"time",fullWidth:!0,value:i.start_time,onChange:w})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"End Time: "),r.a.createElement(k.a,{id:"end_time",type:"time",fullWidth:!0,value:i.end_time,onChange:w}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},_e=function(e){var t=Object(n.useState)({driver_id:e.match.params.driverId,vehicle_id:e.match.params.vehicleId,route_id:e.match.params.routeId}),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),m=Object(o.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)([]),h=Object(o.a)(d,2),E=h[0],p=h[1],f="";f=void 0===l.driver?"":l.driver.name;var v=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)};Object(n.useEffect)((function(){var t;t=e.match.params.assignmentId,q("assignments",t).then((function(e){c(e)})),A("routes").then((function(e){e.sort((function(e,t){return e.name>t.name?1:-1})),s(e)})),A("vehicles").then((function(e){e.sort((function(e,t){return e.number>t.number?1:-1})).sort((function(e,t){return e.company.localeCompare(t.company)})),p(e)}))}),[e.match.params.assignmentId]);var g={id:e.match.params.assignmentId,start_time:l.start_time,end_time:l.end_time,driver_id:l.driver_id,vehicle_id:l.vehicle_id,route_id:l.route_id,date_id:l.date_id};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Assignment for ",f),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),B("assignments",g).then((function(){return e.history.push("/route/view")}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Vehicle:"),r.a.createElement(F.a,{id:"vehicle_id",native:!0,onChange:v,fullWidth:!0,required:!0,value:l.vehicle_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Vehicle"),E?E.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.company," ",e.number)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"route_id",native:!0,onChange:v,fullWidth:!0,required:!0,value:l.route_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Route"),u?u.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null)))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},xe=function(e){var t=Object(n.useState)({first_name:"",is_staff:Boolean}),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],s=m[1];Object(n.useEffect)((function(){q("users",e.match.params.userId).then((function(e){c(e),s(e.is_staff)}))}),[e.match.params.userId]);var d=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)},h={id:parseInt(e.match.params.userId),is_staff:u,last_login:l.last_login,username:l.username,first_name:l.first_name,last_name:l.last_name,email:l.email,date_joined:l.date_joined};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Staff Authentication Level"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),B("users",h).then((function(){return e.history.push("/staff/list")}))}},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"First Name: "),r.a.createElement(k.a,{id:"first_name",fullWidth:!0,required:!0,onChange:d,value:l.first_name})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Last Name: "),r.a.createElement(k.a,{id:"last_name",fullWidth:!0,required:!0,onChange:d,value:l.last_name})),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:u,onChange:function(){s(!u)},color:"primary"}),label:"Supervisor?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/staff/list")}},"Skip"))))},Ie=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){A("users").then((function(e){e.sort((function(e,t){return e.first_name.localeCompare(t.first_name)})).sort((function(e,t){return t.is_staff-e.is_staff})).sort((function(e,t){return t.is_superuser-e.is_superuser})),c(e)}))}),[]);var i={fontSize:20,paddingBottom:2};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Staff List"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(re.a,{style:{fontWeight:600}},"Name"),r.a.createElement(re.a,{style:{fontWeight:600}},"Authorizations"),!0===e.isSupervisor?r.a.createElement(re.a,{style:{fontWeight:600}},"Actions"):null)),r.a.createElement(ne.a,null,l.map((function(t){return r.a.createElement(oe.a,{key:t.id,className:"table_rows"},r.a.createElement(re.a,null,t.first_name," ",t.last_name),!0===t.is_superuser?r.a.createElement(re.a,null,"Admin"):r.a.createElement(r.a.Fragment,null,!0===t.is_staff?r.a.createElement(re.a,null,"Supervisor"):r.a.createElement(re.a,null,"Staff")),!0===e.isSupervisor?r.a.createElement(re.a,null,r.a.createElement("span",{className:"action-icon"},r.a.createElement(se.b,{onClick:function(){return e.history.push("/staff/edit/".concat(t.id))},style:i}))):null)}))))))},ke=a(129),De=a.n(ke),Fe=a(128),We=a.n(Fe),we=function(e){var t=e.assignment,a=e.chosenRoute,n=e.removeAssignment;return r.a.createElement("div",{className:"assignment_card"},r.a.createElement("span",null,t.driver.name," "),r.a.createElement("span",{style:{fontWeight:"bold"}},t.driver.phone_number," "),!0===t.driver.isLocal?r.a.createElement("span",{style:{color:"green",fontWeight:"600"}},"L"):null,!0===e.isSupervisor||!0===e.isStaff?r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,{className:"assignment_icon",onClick:function(){return n(t.id)},style:{fontSize:20}}),r.a.createElement(se.a,{className:"assignment_icon",onClick:function(){return e.history.push("/assignment/edit/".concat(t.id,"/").concat(e.route.id,"/").concat(t.driver_id,"/").concat(t.vehicle_id))},style:{fontSize:17}})):null,r.a.createElement(se.b,{className:"assignment_icon",onClick:function(){return e.history.push("/driver/edit/".concat(t.driver_id,"/").concat(t.vehicle_id))},style:{fontSize:20}}),r.a.createElement("div",null,r.a.createElement("span",{style:{fontWeight:"bold"}},t.vehicle.number," "),r.a.createElement("span",null,t.vehicle.company," "),r.a.createElement("span",{style:{fontWeight:"bold"}},t.vehicle.capacity," "),r.a.createElement("span",null,t.vehicle.kind," "),!0===t.vehicle.isAda?r.a.createElement(se.c,{style:{color:"red"}}):null),""===a?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,t.start_time.slice(0,-3)," -"," ",t.end_time.slice(0,-3)),r.a.createElement("div",null,t.driver.notes)))},Re=(a(73),function(e){var t=e.route,a=e.chosenDate,l=e.chosenRoute,c=Object(n.useState)([]),i=Object(o.a)(c,2),m=i[0],u=i[1];Object(n.useEffect)((function(){P(parseInt(a),t.id).then((function(e){e.sort((function(e,t){return e.vehicle.number>t.vehicle.number?-1:1})).sort((function(e,t){return e.vehicle.number.length>t.vehicle.number.length?1:-1})).sort((function(e,t){return e.vehicle.company.localeCompare(t.vehicle.company)})),u(e)}))}),[a,t.id]);var s=function(e){!0===window.confirm("Are you sure you want to delete this assignment? Deletion cannot be undone.")&&V("assignments",e).then((function(){return P(parseInt(a),t.id).then((function(e){u(e)}))}))},d="";d=parseInt(t.name)<10?t.name.slice(1):t.name;var h={color:t.color,fontWeight:"600"},E={borderColor:t.color};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"route_border",style:E},!0===isNaN(t.name)?r.a.createElement(W.a,{component:"h6",className:"route_name",style:h},d," ",t.description):r.a.createElement(W.a,{component:"h6",className:"route_name",style:h},"Route ",d," ",t.description),!0===e.isSupervisor||!0===e.isStaff?r.a.createElement(De.a,{className:"route_icon",onClick:function(){return e.history.push("/assignment/add/".concat(e.route.id))},style:{fontSize:20},value:t.id}):null,r.a.createElement("div",null,m.map((function(t){return r.a.createElement(we,Object.assign({key:t.id,assignment:t,chosenRoute:l,removeAssignment:s},e))})))))}),Le=function(e){var t=e.dates,a=e.routes,n=e.chosenDate,l=e.chosenRoute,c=e.handleChosenDateChange,o=e.handleChosenRouteChange,i=a.filter((function(e){return e.name.includes(l)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Route View"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:c,fullWidth:!0,required:!0,value:n},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:o,fullWidth:!0,required:!0,value:l},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))))),""!==n?r.a.createElement("div",{className:"route_card"},i.map((function(t){return r.a.createElement(Re,Object.assign({key:t.id,route:t,chosenDate:n,chosenRoute:l},e))}))):null)},Ae=function(e){var t=e.dates,a=e.routes,l=e.chosenDateId,c=e.chosenDateName,i=e.chosenRoute,m=e.handleChosenDateChange,u=e.handleChosenRouteChange,s=Object(n.useState)([]),d=Object(o.a)(s,2),h=d[0],E=d[1],p=Object(n.useState)(""),f=Object(o.a)(p,2),v=f[0],g=f[1],b=h.filter((function(e){return e.route.name.includes(i)})).filter((function(e){return e.date.date.includes(c)})).filter((function(e){return e.driver.name.toLowerCase().includes(v)||e.driver.notes.toLowerCase().includes(v)||e.vehicle.company.toLowerCase().includes(v)||e.vehicle.number.includes(v)})).sort((function(e,t){return e.route.name.localeCompare(t.route.name)})).sort((function(e,t){return e.vehicle.company.localeCompare(t.vehicle.company)})).sort((function(e,t){return e.date.date.localeCompare(t.date.date)})),y=Object(n.useState)(null),C=Object(o.a)(y,2),S=C[0],j=C[1];"date"===S?b.sort((function(e,t){return e.date.date.localeCompare(t.date.date)})):"driver"===S?b.sort((function(e,t){return e.driver.name.localeCompare(t.driver.name)})):"company"===S?b.sort((function(e,t){return e.vehicle.company.localeCompare(t.vehicle.company)})):"route"===S?b.sort((function(e,t){return e.route.name.localeCompare(t.route.name)})):"local"===S&&b.sort((function(e,t){return e.driver.isLocal===t.driver.isLocal?0:e.driver.isLocal?-1:1})),Object(n.useEffect)((function(){A("assignments").then((function(e){E(e)}))}),[]);var N=0;0!==b.length&&(N=b.length);var O=Object(n.useState)(null),_=Object(o.a)(O,2),I=_[0],w=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Driver List"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Date:"),r.a.createElement(F.a,{id:"dateId",native:!0,onChange:m,fullWidth:!0,required:!0,value:l},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Dates"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:u,fullWidth:!0,required:!0,value:i},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(x.a,{item:!0,xs:12,md:3},r.a.createElement(D.a,{htmlFor:"age-native-simple"},"Search:"),r.a.createElement(k.a,{type:"text",id:"keyword",fullWidth:!0,onChange:function(e){g(e.target.value.toLowerCase())},value:v})))),r.a.createElement(W.a,{variant:"h6"},N," drivers"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,""===l?r.a.createElement(re.a,{className:"table_column_header",style:{fontWeight:600},onClick:function(){return j("date")},onMouseEnter:function(){return w("date")},onMouseLeave:function(){return w("")}},"Dates","date"===I?r.a.createElement(he.a,null):null):null,r.a.createElement(re.a,{className:"table_column_header",style:{fontWeight:600},onClick:function(){return j("driver")},onMouseEnter:function(){return w("driver")},onMouseLeave:function(){return w("")}},"Name",r.a.createElement("div",null,"Phone #"),"driver"===I?r.a.createElement(he.a,null):null),r.a.createElement(re.a,{className:"table_column_header",style:{fontWeight:600},onClick:function(){return j("company")},onMouseEnter:function(){return w("company")},onMouseLeave:function(){return w("")}},"Company",r.a.createElement("div",null,"Vehicle #"),"company"===I?r.a.createElement(he.a,null):null),""===i?r.a.createElement(re.a,{className:"table_column_header",style:{fontWeight:600},onClick:function(){return j("route")},onMouseEnter:function(){return w("route")},onMouseLeave:function(){return w("")}},"Route","route"===I?r.a.createElement(he.a,null):null):null,r.a.createElement(re.a,{style:{fontWeight:600},onClick:function(){return j("local")},onMouseEnter:function(){return w("local")},onMouseLeave:function(){return w("")}},"Local","local"===I?r.a.createElement(he.a,null):null),r.a.createElement(re.a,{style:{fontWeight:600}},"Notes"),r.a.createElement(re.a,{style:{fontWeight:600}},"Actions"))),r.a.createElement(ne.a,null,b.map((function(t){return r.a.createElement(oe.a,{key:t.id,className:"table_rows"},""===l?r.a.createElement(re.a,null,t.date.date.slice(5)):null,r.a.createElement(re.a,{className:"list_name"},t.driver.name,r.a.createElement("div",null,t.driver.phone_number)),r.a.createElement(re.a,{className:"list_phone"},t.vehicle.company,r.a.createElement("div",null,t.vehicle.number)),""===i?r.a.createElement(r.a.Fragment,null,parseInt(t.route.name)<10?r.a.createElement(re.a,null,t.route.name.slice(1)):r.a.createElement(re.a,null,t.route.name)):null,!0===t.driver.isLocal?r.a.createElement(re.a,{className:"is_local"},"Local"):r.a.createElement(re.a,null),r.a.createElement(re.a,{className:"list_notes"},t.driver.notes),r.a.createElement(re.a,null,r.a.createElement("span",{className:"action-icon"},r.a.createElement(se.b,{style:{fontSize:20},onClick:function(){return e.history.push("/driver/edit/".concat(t.driver_id,"/").concat(t.vehicle_id))}}))))}))))))},qe=function(e){var t=e.hasUser,a=e.isSupervisor,l=e.isStaff,c=e.dates,i=e.routes,u=e.chosenDateId,s=e.chosenDateName,d=e.chosenRoute,h=e.handleChosenRouteChange,E=e.handleChosenDateChange,p=e.getDates,f=e.getShuttles,v=e.getRoutes,g=e.getPlaces,b=Object(n.useState)(1),y=Object(o.a)(b,2),C=y[0],S=y[1],j=Object(n.useState)(1),N=Object(o.a)(j,2),O=N[0],_=N[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/route/view"})}}),r.a.createElement(m.b,{exact:!0,path:"/date/form",render:function(){return t?r.a.createElement(fe,Object.assign({getDates:p},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/shuttle/form",render:function(){return t?r.a.createElement(ve,Object.assign({getShuttles:f},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/route/form",render:function(){return t?r.a.createElement(ge,Object.assign({getRoutes:v},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/location/form",render:function(){return t?r.a.createElement(be,Object.assign({routes:i,getPlaces:g},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/driver/form",render:function(e){return t?r.a.createElement(ye,Object.assign({setDriverId:S},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/driver/edit/:driverId(\\d+)/:vehicleId(\\d+)",render:function(e){return t?r.a.createElement(Ce,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/vehicle/form",render:function(e){return t?r.a.createElement(Se,Object.assign({setVehicleId:_},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/vehicle/edit/:driverId(\\d+)/:vehicleId(\\d+)",render:function(e){return t?r.a.createElement(je,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/form",render:function(e){return t?r.a.createElement(Ne,Object.assign({chosenDate:u,handleChosenDateChange:E,driverId:C,vehicleId:O},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/add/:routeId(\\d+)",render:function(e){return t?r.a.createElement(Oe,Object.assign({chosenDate:u,handleChosenDateChange:E},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/edit/:assignmentId(\\d+)/:routeId(\\d+)/:driverId(\\d+)/:vehicleId(\\d+)",render:function(e){return t?r.a.createElement(_e,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/staff/edit/:userId(\\d+)",render:function(e){return t?r.a.createElement(xe,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/route/view",render:function(e){return t?r.a.createElement(Le,Object.assign({isStaff:l,isSupervisor:a,dates:c,routes:i,chosenDate:u,chosenRoute:d,handleChosenDateChange:E,handleChosenRouteChange:h},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/driver/list",render:function(e){return t?r.a.createElement(Ae,Object.assign({dates:c,routes:i,chosenDateId:u,chosenDateName:s,chosenRoute:d,handleChosenDateChange:E,handleChosenRouteChange:h},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/staff/list",render:function(e){return t?r.a.createElement(Ie,Object.assign({isStaff:l,isSupervisor:a},e)):r.a.createElement(m.a,{to:"/login"})}}))},Me=a(296),Pe=a(295),Te=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(o.a)(t,2),l=a[0],c=a[1],m=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{onSubmit:function(t){t.preventDefault();var a={username:l.username,password:l.password};H(a).then((function(t){"token"in t?(e.setUserToken(t),e.findSupervisor(),e.history.push("/")):alert("User/password combination not found.")}))}},r.a.createElement(x.a,{container:!0,component:"main"},r.a.createElement(Me.a,null),r.a.createElement(x.a,null,r.a.createElement("div",null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{noValidate:!0},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:m}),r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:m}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In"),r.a.createElement(x.a,{container:!0},r.a.createElement(x.a,{item:!0},r.a.createElement("br",null),r.a.createElement(i.b,{to:"/register",variant:"body2"},"Don't have an account? Sign Up"))))))))))},ze=a(131),Be=function(e){var t=Object(n.useState)({username:"",email:"",password:"",firstName:"",lastName:""}),a=Object(o.a)(t,2),l=a[0],c=a[1],m=function(e){var t=Object(_.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(Pe.a,{component:"main",maxWidth:"xs"},r.a.createElement(Me.a,null),r.a.createElement("div",null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Create new account"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=[];for(var n in l)""===l[n].trim()&&function(){var e=[];Object(ze.a)(n).forEach((function(t){t===t.toUpperCase()&&e.push(" "),e.push(t.toLowerCase())})),a.push(e.join(""))}();var r={username:l.username.trim(),email:l.email.trim(),password:l.password,first_name:l.firstName.trim(),last_name:l.lastName.trim()};U(r).then((function(t){"token"in t&&(e.setUserToken(t),e.history.push("/entry/form"))})).catch((function(){alert("This username has already been taken, please try a different one")}))},autoComplete:"on"},r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(k.a,{autoComplete:"fname",margin:"normal",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:m})),r.a.createElement(x.a,{item:!0,xs:12,sm:6},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:m})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:m})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:m})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:m}))),r.a.createElement("br",null),r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Submit")),r.a.createElement(x.a,{container:!0,justify:"flex-end"},r.a.createElement(x.a,{item:!0},r.a.createElement("br",null),r.a.createElement(i.b,{to:"/",variant:"body2"},"Already have an account? Sign in")))))},Ve=function(e){var t=function(){return null!==sessionStorage.getItem("token")},a=Object(n.useState)(t()),l=Object(o.a)(a,2),c=l[0],u=l[1],s=Object(n.useState)(Boolean),d=Object(o.a)(s,2),h=d[0],E=d[1],p=Object(n.useState)(Boolean),f=Object(o.a)(p,2),v=f[0],g=f[1],b=function(){q("users",sessionStorage.getItem("userID")).then((function(e){E(e.is_superuser),g(e.is_staff)}))},y=function(e){sessionStorage.setItem("token",e.token),sessionStorage.setItem("userID",e.user_id),u(t())},C=Object(n.useState)(!1),S=Object(o.a)(C,2),j=S[0],N=S[1],_=Object(n.useState)([]),x=Object(o.a)(_,2),I=x[0],k=x[1],D=Object(n.useState)([]),F=Object(o.a)(D,2),W=F[0],w=F[1],R=Object(n.useState)([]),L=Object(o.a)(R,2),M=L[0],P=L[1],T=Object(n.useState)([]),z=Object(o.a)(T,2),B=z[0],V=z[1],U=Object(n.useState)([]),H=Object(o.a)(U,2),J=H[0],Y=H[1],G=Object(n.useState)(""),K=Object(o.a)(G,2),Q=K[0],X=K[1],Z=Object(n.useState)(""),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(o.a)(ae,2),re=ne[0],le=ne[1],ce=Object(n.useState)(""),oe=Object(o.a)(ce,2),ie=oe[0],me=oe[1],ue=Object(n.useState)(""),se=Object(o.a)(ue,2),de=se[0],he=se[1],Ee=Object(n.useState)(""),fe=Object(o.a)(Ee,2),ve=fe[0],ge=fe[1],be=Object(n.useState)(""),ye=Object(o.a)(be,2),Ce=ye[0],Se=ye[1],je=function(){A("dates").then((function(e){e.sort((function(e,t){return e.date.localeCompare(t.date)})),k(e)}))},Ne=function(){A("shuttles").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),w(e)}))},Oe=function(){A("routes").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),P(e)}))},_e=function(){A("places").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),V(e)}))},xe=function(e){var t=e.target.value;he(t),ge(""),Se(""),A("places").then((function(e){V(""!==t?e.filter((function(e){return e.route.name===t})).sort((function(e,t){return e.name.localeCompare(t.name)})):e.sort((function(e,t){return e.name.localeCompare(t.name)})))}))},Ie=function(e){X(e.target.value),te(e.target.options[e.target.selectedIndex].dataset.name)};return Object(n.useEffect)((function(){je(),Ne(),Oe(),_e()}),[]),r.a.createElement(i.a,null,r.a.createElement(r.a.Fragment,null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,Object.assign({hasUser:c,clearUser:function(){sessionStorage.clear(),u(t()),E(!1),g(!1),he("")},isSupervisor:h,isStaff:v,mode:j,handleModeChange:function(){N(!j),b()}},e)),r.a.createElement(r.a.Fragment,null,!1===j?r.a.createElement(pe,Object.assign({hasUser:c,isSupervisor:h,dates:I,shuttles:W,routes:M,places:B,entries:J,chosenDateId:Q,chosenDateName:ee,chosenShuttleId:re,chosenShuttleName:ie,chosenRoute:de,chosenPlaceId:ve,chosenPlaceName:Ce,getEntries:function(){A("entries").then((function(e){Y(e)}))},handleChosenPlaceChange:function(e){ge(e.target.value),Se(e.target.options[e.target.selectedIndex].dataset.name),""!==e.target.value||A("routes").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),P(e)}))},handleChosenRouteChange:xe,handleChosenShuttleChange:function(e){le(e.target.value),me(e.target.options[e.target.selectedIndex].dataset.name)},handleChosenDateChange:Ie},e)):r.a.createElement(qe,Object.assign({hasUser:c,isSupervisor:h,isStaff:v,dates:I,routes:M,chosenDateId:Q,chosenDateName:ee,chosenRoute:de,handleChosenRouteChange:xe,handleChosenDateChange:Ie,getDates:je,getShuttles:Ne,getRoutes:Oe,getPlaces:_e},e)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(Te,Object.assign({setUserToken:y,findSupervisor:b},e))}}),r.a.createElement(m.b,{exact:!0,path:"/register",render:function(e){return r.a.createElement(Be,Object.assign({setUserToken:y},e))}}))))};c.a.render(r.a.createElement(Ve,null),document.getElementById("root"))},73:function(e,t,a){}},[[141,1,2]]]);
//# sourceMappingURL=main.806e9218.chunk.js.map