(this["webpackJsonpfinal-capstone-react-app"]=this["webpackJsonpfinal-capstone-react-app"]||[]).push([[0],{140:function(e,t,a){e.exports=a(248)},248:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),i=a(5),o=a(10),m=a(15),s=a(299),u=a(122),d=a.n(u),h=a(99),E=a.n(h),p=a(123),f=a.n(p),v=a(125),g=a.n(v),b=a(124),y=a.n(b),C=a(300),S=a(129),N=a(100),j=a.n(N),O=function(e){var t=e.hasUser,a=e.clearUser,n=e.mode,l=e.handleModeChange,c=r.a.useState(null),u=Object(i.a)(c,2),h=u[0],p=u[1],v=function(e){p(e.currentTarget)},b=function(){p(null)};return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/",style:{textDecoration:"none"}},!1===n?r.a.createElement("span",{className:"nav-header",onClick:l},"Switch to Manager"):r.a.createElement("span",{className:"nav-header",onClick:l},"Switch to Tracker")),r.a.createElement(s.a,{align:"right"},!1===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nav-icon"},r.a.createElement(o.b,{to:"/log"},r.a.createElement(E.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(o.b,{to:"/graph"},r.a.createElement(d.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(o.b,{to:"/entry/form"},r.a.createElement(f.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(j.a,{style:{fontSize:30},color:"action","aria-haspopup":"true","aria-controls":"lock-menu",onClick:v}),r.a.createElement(S.a,{id:"lock-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:b},r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/login",onClick:a,style:{textDecoration:"none"}},"Logout"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nav-icon"},r.a.createElement(o.b,{to:"/driver/list"},r.a.createElement(E.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),r.a.createElement("span",{className:"nav-icon"},r.a.createElement(o.b,{to:"/route/view"},r.a.createElement(y.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))),!0===e.isSupervisor||!0===e.isStaff?r.a.createElement("span",{className:"nav-icon"},r.a.createElement(o.b,{to:"/driver/form"},r.a.createElement(g.a,{style:{fontSize:30},color:"action",className:"navbar-icon"}))):null,r.a.createElement("span",{className:"nav-icon"},r.a.createElement(j.a,{style:{fontSize:30},color:"action","aria-haspopup":"true","aria-controls":"lock-menu",onClick:v}),r.a.createElement(S.a,{id:"lock-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:b},!0===e.isSupervisor||!0===e.isStaff?r.a.createElement("div",null,r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/date/form",style:{textDecoration:"none"}},"Add Date")),r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/shuttle/form",style:{textDecoration:"none"}},"Add Shuttle")),r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/route/form",style:{textDecoration:"none"}},"Add Route")),r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/location/form",style:{textDecoration:"none"}},"Add Location")),r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/vehicle/form",style:{textDecoration:"none"}},"Add Vehicle")),r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/staff/list",style:{textDecoration:"none"}},"Staff List")),r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/login",onClick:a,style:{textDecoration:"none"}},"Logout"))):r.a.createElement(C.a,{onClick:b},r.a.createElement(o.b,{to:"/login",onClick:a,style:{textDecoration:"none"}},"Logout"))))))):r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/login"})}}))},x=a(9),_=a(283),I=a(287),D=a(298),k=a(301),F=a(297),W=a(250),w=a(286),R=a(296),A="http://localhost:8000",q=function(e){return fetch("".concat(A,"/").concat(e)).then((function(e){return e.json()}))},L=function(e,t){return fetch("".concat(A,"/").concat(e,"/").concat(t)).then((function(e){return e.json()}))},P=function(e,t,a){return fetch("".concat(A,"/").concat(e,"?").concat(t,"=").concat(a)).then((function(e){return e.json()}))},T=function(e,t){return fetch("".concat(A,"/assignments?dateID=").concat(e,"&routeID=").concat(t)).then((function(e){return e.json()}))},z=function(e,t){return fetch("".concat(A,"/assignments?dateID=").concat(e,"&driverID=").concat(t)).then((function(e){return e.json()}))},B=function(e,t){return fetch("".concat(A,"/").concat(e),{method:"POST",headers:{"content-type":"application/json",Accept:"application/json",Authorization:"Token ".concat(window.sessionStorage.getItem("token"))},body:JSON.stringify(t)}).then((function(e){return e.json()}))},V=function(e,t){return fetch("".concat(A,"/").concat(e,"/").concat(t.id),{method:"PUT",headers:{"content-type":"application/json",Accept:"application/json",Authorization:"Token ".concat(window.sessionStorage.getItem("token"))},body:JSON.stringify(t)})},M=function(e,t){return fetch("".concat(A,"/").concat(e,"/").concat(t),{method:"DELETE"})},U=function(e){return fetch("".concat(A,"/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},H=function(e){return fetch("".concat(A,"/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},J=a(39),Y=a.n(J),G=function(e){var t=e.places,a=e.routes,l=e.shuttles,c=e.dates,o=e.chosenPlaceId,m=e.chosenRoute,s=e.chosenShuttleId,u=e.chosenDateId,d=e.handleChosenPlaceChange,h=e.handleChosenRouteChange,E=e.handleChosenShuttleChange,p=e.handleChosenDateChange,f=Object(n.useState)({attendee_count:"",vehicle_number:"",time:Y()().format("HH:mm")}),v=Object(i.a)(f,2),g=v[0],b=v[1];g.place_id=o,g.shuttle_id=s;var y=Object(n.useState)(!1),C=Object(i.a)(y,2),S=C[0],N=C[1],j=c.find((function(e){return e.date===Y()().format("YYYY-MM-DD")}));void 0!==j?g.date_id=j.id:S=!0;var O=function(e){var t=Object(x.a)({},g);t[e.target.id]=e.target.value,b(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Entry Form"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),!1===S?(g.date_id=j.id,g.time=Y()().format("HH:mm")):g.date_id=u,setTimeout((function(){B("entries",g).then((function(){document.getElementById("attendee_count").value="",document.getElementById("vehicle_number").value="",!0===S&&(document.getElementById("time").value=""),b({attendee_count:"",vehicle_number:"",time:""})}))}),100),alert("Success!")}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Shuttle:"),r.a.createElement(F.a,{id:"shuttle_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:s},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Shuttle"),l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:h,fullWidth:!0,required:!0,value:m},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Location:"),r.a.createElement(F.a,{id:"place_id",native:!0,onChange:d,fullWidth:!0,required:!0,value:o},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Location"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Attendee Count:"," "),r.a.createElement(D.a,{required:!0,type:"number",id:"attendee_count",fullWidth:!0,onChange:O})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Vehicle Number:"," "),r.a.createElement(D.a,{id:"vehicle_number",fullWidth:!0,onChange:O})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:S,onChange:function(){N(!S)},color:"primary"}),label:"NOT LIVE? Click if not live to input past date and/or time."})),!0===S?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:p,fullWidth:!0,required:!0,value:u},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),c?c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Time: "),r.a.createElement(D.a,{id:"time",type:"time",fullWidth:!0,required:!0,onChange:O}))):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},K=function(e){var t=e.shuttles,a=e.dates,l=Object(n.useState)({attendee_count:"",vehicle_number:"",time:""}),c=Object(i.a)(l,2),o=c[0],m=c[1],s=Object(n.useState)([]),u=Object(i.a)(s,2),d=u[0],h=u[1],E=function(e){var t=Object(x.a)({},o);t[e.target.id]=e.target.value,m(t)};Object(n.useEffect)((function(){L("entries",e.match.params.entryId).then((function(e){m(e)})),q("places").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),h(e)}))}),[e.match.params.entryId]);var p={id:parseInt(e.match.params.entryId),shuttle_id:o.shuttle_id,date_id:o.date_id,place_id:o.place_id,user_id:o.user_id,attendee_count:o.attendee_count,vehicle_number:o.vehicle_number,time:o.time};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"event-form-page"},r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Entry"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),V("entries",p).then((function(){e.history.push("/log")}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Event:"),r.a.createElement(F.a,{id:"shuttle_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:o.shuttle_id},t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Location:"),r.a.createElement(F.a,{id:"place_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:o.place_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Location"),d?d.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:E,fullWidth:!0,required:!0,value:o.date_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Time: "),r.a.createElement(D.a,{id:"time",type:"time",fullWidth:!0,value:o.time,onChange:E})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Attendee Count:"," "),r.a.createElement(D.a,{required:!0,type:"number",id:"attendee_count",fullWidth:!0,onChange:E,value:o.attendee_count})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Vehicle Number:"," "),r.a.createElement(D.a,{id:"vehicle_number",fullWidth:!0,value:o.vehicle_number,onChange:E}))),r.a.createElement(_.a,null,r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))))},Q=a(54),X=a(55),Z=function(e){var t=e.filteredEntries,a=e.accumulated,n=e.xRange,l=e.timeSpanIntervals;var c=0;return 0!==t.length&&(c=t.map((function(e){return e.attendee_count})).reduce((function(e,t){return e+t}))),r.a.createElement("div",{className:"graph_border"},r.a.createElement(X.Bar,{data:{labels:l.map((function(e){return e})),datasets:[{backgroundColor:"black",borderColor:"black",data:l.map((function(e){return function(e){var t,n=Object(Q.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r.x)return r.y}}catch(l){n.e(l)}finally{n.f()}return 0}(e)}))}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!0,ticks:{maxTicksLimit:n}}],yAxes:[{display:!0}]}}}),r.a.createElement(W.a,{align:"center"},"All Routes"),r.a.createElement(W.a,{align:"center"},c," attendees moved in ",t.length," trips"))},$=function(e){for(var t=e.filteredEntries,a=e.route,n=e.times,l=e.counts,c=e.xRange,i=e.timeSpanIntervals,o=e.yMax,m=t.filter((function(e){return e.z.includes(a.name)})),s=[],u=0;u<t.length;u++)t[u].z.includes(a.name)?s.push({x:"".concat(n[u],"0"),y:l[u]}):s.push({x:"".concat(n[u],"0"),y:0});var d={};s.forEach((function(e){d.hasOwnProperty(e.x)?d[e.x]=d[e.x]+e.y:d[e.x]=e.y}));var h=[];for(var E in d)h.push({x:E,y:d[E]});var p="";p=parseInt(a.name)<10?a.name.slice(1):a.name;var f=0;return 0!==m.length&&(f=m.map((function(e){return e.y})).reduce((function(e,t){return e+t}))),r.a.createElement(r.a.Fragment,null,0!==f?r.a.createElement("div",{className:"places_graph_border"},r.a.createElement(X.Bar,{data:{labels:i.map((function(e){return e})),datasets:[{backgroundColor:a.color,borderColor:"black",borderWidth:.5,data:i.map((function(e){return function(e){var t,a=Object(Q.a)(h);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e===n.x)return n.y}}catch(r){a.e(r)}finally{a.f()}return 0}(e)}))}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!0,ticks:{maxTicksLimit:c}}],yAxes:[{display:!0,ticks:{suggestedMax:o}}]}}}),!0===isNaN(a.name)?r.a.createElement(W.a,{align:"center"},p," ",a.description):r.a.createElement(W.a,{align:"center"},"Route ",p," ",a.description),r.a.createElement(W.a,{align:"center"},f," attendees moved in ",m.length," trips")):r.a.createElement("div",{className:"places_graph_border",style:{padding:"20px 0 20px 0"}},!0===isNaN(a.name)?r.a.createElement(W.a,{align:"center"},"There is no ridership data for ",p," ",a.description):r.a.createElement(W.a,{align:"center"},"There is no ridership data for Route ",p," ",a.description)))},ee=function(e){for(var t=e.filteredEntries,a=e.place,n=e.times,l=e.counts,c=e.xRange,i=e.timeSpanIntervals,o=e.yMax,m=t.filter((function(e){return e.z.includes(a.name)})),s=[],u=0;u<t.length;u++)t[u].z.includes(a.name)?s.push({x:"".concat(n[u],"0"),y:l[u]}):s.push({x:"".concat(n[u],"0"),y:0});var d={};s.forEach((function(e){d.hasOwnProperty(e.x)?d[e.x]=d[e.x]+e.y:d[e.x]=e.y}));var h=[];for(var E in d)h.push({x:E,y:d[E]});var p=0;0!==m.length&&(p=m.map((function(e){return e.y})).reduce((function(e,t){return e+t})));return r.a.createElement(r.a.Fragment,null,0!==p?r.a.createElement("div",{className:"places_graph_border",onClick:function(){document.getElementById("".concat(a.id)).classList.remove("graph_border")},id:a.id},r.a.createElement(X.Bar,{data:{labels:i.map((function(e){return e})),datasets:[{backgroundColor:a.route.color,borderColor:"black",borderWidth:.5,data:i.map((function(e){return function(e){var t,a=Object(Q.a)(h);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(e===n.x)return n.y}}catch(r){a.e(r)}finally{a.f()}return 0}(e)}))}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!0,ticks:{maxTicksLimit:c}}],yAxes:[{display:!0,ticks:{suggestedMax:o}}]}}}),r.a.createElement(W.a,{align:"center"},a.name),r.a.createElement(W.a,{align:"center"},p," attendees moved in ",m.length," trips")):r.a.createElement("div",{className:"places_graph_border",style:{padding:"20px 0 20px 0"}},r.a.createElement(W.a,{align:"center",style:{marginTop:40}},"There is no ridership data for ",a.name)))},te=function(e){for(var t=e.routes,a=e.shuttles,l=e.dates,c=e.chosenShuttleId,o=e.chosenShuttleName,m=e.chosenDateId,s=e.chosenDateName,u=e.handleChosenShuttleChange,d=e.handleChosenDateChange,h=e.entries,E=e.getEntries,p=Object(n.useState)([]),f=Object(i.a)(p,2),v=f[0],g=f[1],b=h.filter((function(e){return e.shuttle.name.includes(o)})).filter((function(e){return e.date.date.includes(s)})).sort((function(e,t){return e.time.localeCompare(t.time)})),y=b.map((function(e){return e.time.slice(0,4)})),C=b.map((function(e){return e.attendee_count})),S=b.map((function(e){return e.place.route.name})),N=b.map((function(e){return e.place_id})),j=b.map((function(e){return e.place.name})),O=[],x=[],D=[],w=0;w<b.length;w++)O.push({x:"".concat(y[w],"0"),y:C[w]}),x.push({x:"".concat(y[w]).concat(S[w]),y:C[w],z:S[w]}),D.push({x:"".concat(y[w]).concat(N[w]),y:C[w],z:j[w]});var R={},A={},L={};O.forEach((function(e){R.hasOwnProperty(e.x)?R[e.x]=R[e.x]+e.y:R[e.x]=e.y})),x.forEach((function(e){A.hasOwnProperty(e.x)?A[e.x]=A[e.x]+e.y:A[e.x]=e.y})),D.forEach((function(e){L.hasOwnProperty(e.x)?L[e.x]=L[e.x]+e.y:L[e.x]=e.y}));var P=[],T=[],z=[];for(var B in R)P.push({x:B,y:R[B]});for(var V in A)T.push({x:V,y:A[V]});for(var M in L)z.push({x:M,y:L[M]});var U="",H="";0!==P.length&&(U=parseInt(P[0].x),H=parseInt(P[P.length-1].x)+1);for(var J=2*(H-U+1),Y=H-U+1,G=[],K=U;K<H;K++)for(var Q=0;Q<6;Q++)K<10?G.push("0".concat(K,":").concat(Q,"0")):G.push("".concat(K,":").concat(Q,"0"));var X,te;X=Math.max.apply(Math,T.map((function(e){return e.y}))),te=Math.max.apply(Math,z.map((function(e){return e.y}))),Object(n.useEffect)((function(){E(),q("places").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),g(e)}))}),[]);var ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),re=ne[0],le=ne[1],ce=function(){le(!re)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Ridership Graphs"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"dateId",native:!0,onChange:d,fullWidth:!0,required:!0,label:"??",value:m},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Shuttle:"),r.a.createElement(F.a,{id:"shuttleId",native:!0,onChange:u,fullWidth:!0,required:!0,label:"??",value:c},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Shuttles"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))))),0!==b.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"graph"},r.a.createElement(Z,Object.assign({filteredEntries:b,accumulated:P,xRange:J,timeSpanIntervals:G},e))),r.a.createElement("div",{style:{marginBottom:40}},!0===re?r.a.createElement(I.a,{onClick:ce,variant:"contained",color:"primary"},"View Location Graphs"):r.a.createElement(I.a,{onClick:ce,variant:"contained",color:"primary"},"View Route Graphs")),!0===re?r.a.createElement("div",{className:"places_graph"},t.map((function(t){return r.a.createElement($,Object.assign({key:t.id,route:t,filteredEntries:x,times:y,counts:C,chosenDateName:s,chosenShuttleName:o,xRange:Y,timeSpanIntervals:G,yMax:X},e))}))):r.a.createElement("div",{className:"places_graph"},v.sort((function(e,t){return e.route.name.localeCompare(t.route.name)})).map((function(t){return r.a.createElement(ee,Object.assign({key:t.id,place:t,filteredEntries:D,times:y,counts:C,chosenDateName:s,chosenShuttleName:o,xRange:Y,timeSpanIntervals:G,yMax:te},e))})))):r.a.createElement(W.a,{align:"center"},"There is no ridership data for ",o,""!==s?r.a.createElement(r.a.Fragment,null," on ",s):null))},ae=a(289),ne=a(293),re=a(292),le=a(288),ce=a(290),ie=a(291),oe=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1],o=l.filter((function(t){return t.vehicle.number.includes(e.match.params.vehNum)}));return Object(n.useEffect)((function(){P("assignments","dateID",e.match.params.dateId).then((function(e){c(e)}))}),[e.match.params.dateId]),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Possible Matches"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(re.a,null,"Vehicle Company"),r.a.createElement(re.a,null,"Vehicle Number"),r.a.createElement(re.a,null,"Driver Name"),r.a.createElement(re.a,null,"Phone Number"),r.a.createElement(re.a,null,"Route"))),0!==o.length?r.a.createElement(ne.a,null,o.map((function(e){return r.a.createElement(ie.a,{key:e.id},r.a.createElement(re.a,null,e.vehicle.company),r.a.createElement(re.a,null,e.vehicle.number),r.a.createElement(re.a,null,e.driver.name),r.a.createElement(re.a,null,e.driver.phone_number),r.a.createElement(re.a,null,e.route.name," ",e.route.description))}))):null)))},me=a(126),se=a.n(me),ue=a(27),de=function(e){var t=e.places,a=e.routes,l=e.shuttles,c=e.dates,o=e.chosenPlaceId,m=e.chosenPlaceName,s=e.chosenRoute,u=e.chosenShuttleId,d=e.chosenShuttleName,h=e.chosenDateId,E=e.chosenDateName,p=e.handleChosenPlaceChange,f=e.handleChosenRouteChange,v=e.handleChosenShuttleChange,g=e.handleChosenDateChange,b=e.entries,y=e.getEntries,C=Object(n.useState)(""),S=Object(i.a)(C,2),N=S[0],j=S[1],O=b.filter((function(e){return e.shuttle.name.includes(d)})).filter((function(e){return e.place.name.includes(m)})).filter((function(e){return e.place.route.name.includes(s)})).filter((function(e){return e.date.date.includes(E)})).filter((function(e){return e.vehicle_number.includes(N)||e.time.includes(N)||e.attendee_count.toString().includes(N)||e.user.first_name.toLowerCase().includes(N)||e.user.last_name.toLowerCase().includes(N)})).sort((function(e,t){return e.time.localeCompare(t.time)})).sort((function(e,t){return e.date.date.localeCompare(t.date.date)})),x=0;0!==O.length&&(x=O.map((function(e){return e.attendee_count})).reduce((function(e,t){return e+t})));Object(n.useEffect)((function(){y()}),[]);var I={fontSize:20,paddingBottom:2};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Ridership Logs"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"dateId",native:!0,onChange:g,fullWidth:!0,required:!0,value:h},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Dates"),c?c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Shuttle:"),r.a.createElement(F.a,{id:"shuttleId",native:!0,onChange:v,fullWidth:!0,required:!0,value:u},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Shuttles"),l?l.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:f,fullWidth:!0,required:!0,value:s},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Location:"),r.a.createElement(F.a,{id:"placeId",native:!0,onChange:p,fullWidth:!0,required:!0,value:o},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Locations"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.name},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Search:"),r.a.createElement(D.a,{type:"text",id:"keyword",fullWidth:!0,onChange:function(e){j(e.target.value.toLowerCase())},value:N})))),r.a.createElement(W.a,{variant:"h6"},x," attendees moved in ",O.length," trips"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(re.a,{style:{fontWeight:600}},"Time"),r.a.createElement(re.a,{style:{fontWeight:600}},"Vehicle #"),r.a.createElement(re.a,{style:{fontWeight:600}},"Pax"),""===h?r.a.createElement(re.a,{style:{fontWeight:600}},"Date"):null,""===u?r.a.createElement(re.a,{style:{fontWeight:600}},"Shuttle"):null,""===s?r.a.createElement(re.a,{style:{fontWeight:600}},"Rt"):null,""===o?r.a.createElement(re.a,{style:{fontWeight:600}},"Location"):null,r.a.createElement(re.a,{style:{fontWeight:600}},"Entered By"),r.a.createElement(re.a,{style:{fontWeight:600}},"Actions"))),r.a.createElement(ne.a,null,O.map((function(t){return r.a.createElement(ie.a,{key:t.id,className:"table_rows"},r.a.createElement(re.a,{component:"th",scope:"entry"},t.time.slice(0,-3)),r.a.createElement(re.a,{style:{textDecoration:"underline"},className:"action-icon",onClick:function(){return e.history.push("/assignment/finder/".concat(t.date_id,"/").concat(t.vehicle_number))}},t.vehicle_number),r.a.createElement(re.a,null,t.attendee_count),""===h?r.a.createElement(re.a,null,t.date.date.slice(5)):null,""===u?r.a.createElement(re.a,null,t.shuttle.name):null,""===s?r.a.createElement(r.a.Fragment,null,parseInt(t.place.route.name)<10?r.a.createElement(re.a,null,t.place.route.name.slice(1)):r.a.createElement(re.a,null,t.place.route.name)):null,""===o?r.a.createElement(re.a,null,t.place.name):null,r.a.createElement(re.a,null,t.user.first_name," ",t.user.last_name),r.a.createElement(re.a,null,!0===e.isSupervisor||parseInt(window.sessionStorage.getItem("userID"))===t.user_id?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"action-icon"},r.a.createElement(ue.b,{onClick:function(){return e.history.push("/entry/edit/form/".concat(t.id))},style:I})),r.a.createElement("span",{className:"action-icon"},r.a.createElement(se.a,{onClick:function(){return e=t.id,void(!0===window.confirm("Are you sure you want to delete this entry? Deletion cannot be undone.")&&M("entries",e).then((function(){y()})));var e}}))):null))}))))))},he=function(e){var t=e.hasUser,a=e.isSupervisor,n=e.dates,l=e.shuttles,c=e.routes,i=e.places,o=e.entries,s=e.chosenDateId,u=e.chosenDateName,d=e.chosenShuttleId,h=e.chosenShuttleName,E=e.chosenRoute,p=e.chosenPlaceId,f=e.chosenPlaceName,v=e.getEntries,g=e.handleChosenPlaceChange,b=e.handleChosenRouteChange,y=e.handleChosenShuttleChange,C=e.handleChosenDateChange;return r.a.createElement("span",null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/log"})}}),r.a.createElement(m.b,{exact:!0,path:"/entry/form",render:function(e){return t?r.a.createElement(G,Object.assign({places:i,routes:c,shuttles:l,dates:n,chosenPlaceId:p,chosenRoute:E,chosenShuttleId:d,chosenDateId:s,handleChosenPlaceChange:g,handleChosenRouteChange:b,handleChosenShuttleChange:y,handleChosenDateChange:C},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/entry/edit/form/:entryId(\\d+)",render:function(e){return t?r.a.createElement(K,Object.assign({places:i,routes:c,shuttles:l,dates:n,chosenPlaceId:p,chosenRoute:E,handleChosenPlaceChange:g,handleChosenRouteChange:b},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/log",render:function(e){return t?r.a.createElement(de,Object.assign({isSupervisor:a,getEntries:v,dates:n,shuttles:l,routes:c,places:i,entries:o,chosenPlaceId:p,chosenPlaceName:f,chosenRoute:E,chosenShuttleId:d,chosenShuttleName:h,chosenDateId:s,chosenDateName:u,handleChosenPlaceChange:g,handleChosenRouteChange:b,handleChosenShuttleChange:y,handleChosenDateChange:C},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/graph",render:function(e){return t?r.a.createElement(te,Object.assign({getEntries:v,dates:n,shuttles:l,routes:c,places:i,entries:o,chosenPlaceId:p,chosenPlaceName:f,chosenRoute:E,chosenShuttleId:d,chosenShuttleName:h,chosenDateId:s,chosenDateName:u,handleChosenPlaceChange:g,handleChosenRouteChange:b,handleChosenShuttleChange:y,handleChosenDateChange:C},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/finder/:dateId(\\d+)/:vehNum(\\d+)",render:function(e){return t?r.a.createElement(oe,e):r.a.createElement(m.a,{to:"/login"})}}))},Ee=function(e){var t=e.getDates,a=Object(n.useState)({date:""}),l=Object(i.a)(a,2),c=l[0],o=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Date"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),B("dates",c).then((function(){document.getElementById("date").value="",o({date:""}),t()})),alert("Success!")}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Date: "),r.a.createElement(D.a,{id:"date",type:"date",fullWidth:!0,onChange:function(e){var t=Object(x.a)({},c);t[e.target.id]=e.target.value,o(t)}}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},pe=function(e){var t=e.getShuttles,a=Object(n.useState)({name:""}),l=Object(i.a)(a,2),c=l[0],o=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Shuttle"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),B("shuttles",c).then((function(){document.getElementById("name").value="",o({name:""}),t()})),alert("Success!")}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(D.a,{id:"name",required:!0,fullWidth:!0,onChange:function(e){var t=Object(x.a)({},c);t[e.target.id]=e.target.value,o(t)}}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},fe=function(e){var t=e.getRoutes,a=Object(n.useState)({name:"",color:"",description:""}),l=Object(i.a)(a,2),c=l[0],o=l[1],m=function(e){var t=Object(x.a)({},c);t[e.target.id]=e.target.value,o(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Route"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),B("routes",c).then((function(){document.getElementById("name").value="",document.getElementById("color").value="",document.getElementById("description").value="",o({name:"",color:"",description:""}),t()})),alert("Success!")}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(D.a,{id:"name",fullWidth:!0,required:!0,onChange:m})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Color: "),r.a.createElement(D.a,{id:"color",fullWidth:!0,required:!0,onChange:m})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Description: "),r.a.createElement(D.a,{id:"description",fullWidth:!0,required:!0,onChange:m}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},ve=function(e){var t=e.getPlaces,a=e.routes,l=Object(n.useState)({name:""}),c=Object(i.a)(l,2),o=c[0],m=c[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),d=u[0],h=u[1];o.route_id=d;return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Location"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(e){e.preventDefault(),B("places",o).then((function(){document.getElementById("name").value="",m({name:""}),t()})),alert("Success!")}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(D.a,{id:"name",fullWidth:!0,required:!0,onChange:function(e){var t=Object(x.a)({},o);t[e.target.id]=e.target.value,m(t)}})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"id",native:!0,onChange:function(e){var t=e.target.value;h(t)},fullWidth:!0,required:!0,value:d},r.a.createElement("option",{"aria-label":"None",value:""},"Choose Route"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null)))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},ge=function(e){var t=Object(n.useState)({name:"",phone_number:"",notes:""}),a=Object(i.a)(t,2),l=a[0],c=a[1],m=Object(n.useState)(!1),s=Object(i.a)(m,2),u=s[0],d=s[1],h=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Driver"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),q("drivers").then((function(t){l.isLocal=u,void 0===t.find((function(e){return e.name===l.name}))?(B("drivers",l).then((function(t){return e.setDriverId(t.id)})),e.history.push("/vehicle/form")):alert("Driver already in database.")}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(D.a,{id:"name",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Phone Number: "),r.a.createElement(D.a,{id:"phone_number",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Notes: "),r.a.createElement(D.a,{id:"notes",fullWidth:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:u,onChange:function(){d(!u)},color:"primary"}),label:"Local driver?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(o.b,{to:"/vehicle/form",style:{textDecoration:"none"}},r.a.createElement(I.a,{variant:"contained",color:"primary"},"Skip")))))},be=function(e){var t=Object(n.useState)({name:"",phone_number:"",notes:"",isLocal:Boolean}),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),m=Object(i.a)(o,2),s=m[0],u=m[1];Object(n.useEffect)((function(){L("drivers",e.match.params.driverId).then((function(e){c(e),u(e.isLocal)}))}),[e.match.params.driverId]);var d=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)},h={id:e.match.params.driverId,name:l.name,phone_number:l.phone_number,isLocal:s,notes:l.notes};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Driver Info"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),V("drivers",h).then((function(){return e.history.push("/vehicle/edit/".concat(e.match.params.driverId,"/").concat(e.match.params.vehicleId))}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Name: "),r.a.createElement(D.a,{id:"name",fullWidth:!0,required:!0,onChange:d,value:l.name})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Phone Number: "),r.a.createElement(D.a,{id:"phone_number",fullWidth:!0,required:!0,onChange:d,value:l.phone_number})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Notes: "),r.a.createElement(D.a,{id:"notes",fullWidth:!0,onChange:d,value:l.notes})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:s,onChange:function(){u(!s)},color:"primary"}),label:"Local driver?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/vehicle/edit/".concat(e.match.params.driverId,"/").concat(e.match.params.vehicleId))}},"Skip"))))},ye=function(e){var t=Object(n.useState)({company:"",number:"",kind:"",capacity:""}),a=Object(i.a)(t,2),l=a[0],c=a[1],m=Object(n.useState)(!1),s=Object(i.a)(m,2),u=s[0],d=s[1],h=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Add New Vehicle"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),q("vehicles").then((function(t){l.isAda=u,void 0===t.find((function(e){return e.company===l.company&&e.number===l.number}))?B("vehicles",l).then((function(t){return e.setVehicleId(t.id)})):alert("Vehicle already in database."),setTimeout((function(){e.history.push("/assignment/form")}),100)}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Company: "),r.a.createElement(D.a,{id:"company",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Number: "),r.a.createElement(D.a,{id:"number",fullWidth:!0,required:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Type: "),r.a.createElement(D.a,{id:"kind",fullWidth:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Capacity: "),r.a.createElement(D.a,{id:"capacity",fullWidth:!0,onChange:h})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:u,onChange:function(){d(!u)},color:"primary"}),label:"ADA vehicle?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(o.b,{to:"/assignment/form",style:{textDecoration:"none"}},r.a.createElement(I.a,{variant:"contained",color:"primary"},"Skip")))))},Ce=function(e){var t=Object(n.useState)({company:"",number:"",kind:"",capacity:"",isAda:Boolean}),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),m=Object(i.a)(o,2),s=m[0],u=m[1];Object(n.useEffect)((function(){L("vehicles",e.match.params.vehicleId).then((function(e){c(e),u(e.isAda)}))}),[e.match.params.vehicleId]);var d=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)},h={id:e.match.params.vehicleId,company:l.company,number:l.number,kind:l.kind,capacity:l.capacity,isAda:s};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Vehicle Info"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),V("vehicles",h).then((function(){return e.history.push("/route/view")}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Company: "),r.a.createElement(D.a,{id:"company",fullWidth:!0,required:!0,onChange:d,value:l.company})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Number: "),r.a.createElement(D.a,{id:"number",fullWidth:!0,required:!0,onChange:d,value:l.number})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Type: "),r.a.createElement(D.a,{id:"kind",fullWidth:!0,onChange:d,value:l.kind})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Capacity: "),r.a.createElement(D.a,{id:"capacity",fullWidth:!0,onChange:d,value:l.capacity})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:s,onChange:function(){u(!s)},color:"primary"}),label:"ADA vehicle?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/route/view")}},"Skip"))))},Se=function(e){var t=e.chosenDate,a=e.handleChosenDateChange,l=Object(n.useState)({start_time:Y()().format("HH:mm"),end_time:"23:59",vehicle_id:e.vehicleId,driver_id:e.driverId,route_id:""}),c=Object(i.a)(l,2),o=c[0],m=c[1];o.date_id=t;var s=Object(n.useState)([]),u=Object(i.a)(s,2),d=u[0],h=u[1],E=Object(n.useState)([]),p=Object(i.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)([]),b=Object(i.a)(g,2),y=b[0],C=b[1],S=Object(n.useState)([]),N=Object(i.a)(S,2),j=N[0],O=N[1],w=function(e){var t=Object(x.a)({},o);t[e.target.id]=e.target.value,m(t)};Object(n.useEffect)((function(){q("dates").then((function(e){e.sort((function(e,t){return e.date>t.date?1:-1})),h(e)})),q("routes").then((function(e){e.sort((function(e,t){return e.name>t.name?1:-1})),v(e)})),q("drivers").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),C(e)})),q("vehicles").then((function(e){e.sort((function(e,t){return e.number>t.number?1:-1})).sort((function(e,t){return e.company.localeCompare(t.company)})),O(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Create New Assignment"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),z(o.date_id,o.driver_id).then((function(t){t.length>0?alert("This driver has already been assigned on this day."):B("assignments",o).then((function(){return e.history.push("/route/view")}))}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Driver:"),r.a.createElement(F.a,{id:"driver_id",native:!0,onChange:w,fullWidth:!0,required:!0,value:o.driver_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Driver"),y?y.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Vehicle:"),r.a.createElement(F.a,{id:"vehicle_id",native:!0,onChange:w,fullWidth:!0,required:!0,value:o.vehicle_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Vehicle"),j?j.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.company," ",e.number)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"route_id",native:!0,onChange:w,fullWidth:!0,required:!0},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Route"),f?f.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:a,fullWidth:!0,required:!0,value:t},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),d?d.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Start Time: "),r.a.createElement(D.a,{id:"start_time",type:"time",fullWidth:!0,value:o.start_time,onChange:w})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"End Time: "),r.a.createElement(D.a,{id:"end_time",type:"time",fullWidth:!0,value:o.end_time,onChange:w}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},Ne=function(e){var t=e.chosenDate,a=e.handleChosenDateChange,l=Object(n.useState)({start_time:Y()().format("HH:mm"),end_time:"23:59"}),c=Object(i.a)(l,2),o=c[0],m=c[1];o.route_id=e.match.params.routeId,o.date_id=t;var s=Object(n.useState)([]),u=Object(i.a)(s,2),d=u[0],h=u[1],E=Object(n.useState)([]),p=Object(i.a)(E,2),f=p[0],v=p[1],g=Object(n.useState)([]),b=Object(i.a)(g,2),y=b[0],C=b[1],S=Object(n.useState)([]),N=Object(i.a)(S,2),j=N[0],O=N[1],w=function(e){var t=Object(x.a)({},o);t[e.target.id]=e.target.value,m(t)};Object(n.useEffect)((function(){q("dates").then((function(e){e.sort((function(e,t){return e.date>t.date?1:-1})),v(e)})),q("drivers").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),C(e)})),q("vehicles").then((function(e){e.sort((function(e,t){return e.number>t.number?1:-1})).sort((function(e,t){return e.company.localeCompare(t.company)})),O(e)})),L("routes",e.match.params.routeId).then((function(e){return h(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Create New Assignment for"," ",r.a.createElement("span",{style:{color:d.color}},"Route ",d.name," ",d.description)),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),z(o.date_id,o.driver_id).then((function(t){t.length>0?alert("This driver has already been assigned on this day."):B("assignments",o).then((function(){return e.history.push("/route/view")}))}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:a,fullWidth:!0,required:!0,value:t},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),f?f.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Driver:"),r.a.createElement(F.a,{id:"driver_id",native:!0,onChange:w,fullWidth:!0,required:!0},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Driver"),y?y.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Vehicle:"),r.a.createElement(F.a,{id:"vehicle_id",native:!0,onChange:w,fullWidth:!0,required:!0},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Vehicle"),j?j.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.company," ",e.number)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Start Time: "),r.a.createElement(D.a,{id:"start_time",type:"time",fullWidth:!0,value:o.start_time,onChange:w})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"End Time: "),r.a.createElement(D.a,{id:"end_time",type:"time",fullWidth:!0,value:o.end_time,onChange:w}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},je=function(e){var t=Object(n.useState)({driver_id:e.match.params.driverId,vehicle_id:e.match.params.vehicleId,route_id:e.match.params.routeId}),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),m=Object(i.a)(o,2),s=m[0],u=m[1],d=Object(n.useState)([]),h=Object(i.a)(d,2),E=h[0],p=h[1],f="";f=void 0===l.driver?"":l.driver.name;var v=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)};Object(n.useEffect)((function(){var t;t=e.match.params.assignmentId,L("assignments",t).then((function(e){c(e)})),q("routes").then((function(e){e.sort((function(e,t){return e.name>t.name?1:-1})),u(e)})),q("vehicles").then((function(e){e.sort((function(e,t){return e.number>t.number?1:-1})).sort((function(e,t){return e.company.localeCompare(t.company)})),p(e)}))}),[e.match.params.assignmentId]);var g={id:e.match.params.assignmentId,start_time:l.start_time,end_time:l.end_time,driver_id:l.driver_id,vehicle_id:l.vehicle_id,route_id:l.route_id,date_id:l.date_id};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Assignment for ",f),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),V("assignments",g).then((function(){return e.history.push("/route/view")}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Vehicle:"),r.a.createElement(F.a,{id:"vehicle_id",native:!0,onChange:v,fullWidth:!0,required:!0,value:l.vehicle_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Vehicle"),E?E.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.company," ",e.number)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"route_id",native:!0,onChange:v,fullWidth:!0,required:!0,value:l.route_id},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Route"),s?s.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null)))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))},Oe=function(e){var t=Object(n.useState)({first_name:"",is_staff:Boolean}),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),m=Object(i.a)(o,2),s=m[0],u=m[1];Object(n.useEffect)((function(){L("users",e.match.params.userId).then((function(e){c(e),u(e.is_staff)}))}),[e.match.params.userId]);var d=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)},h={id:parseInt(e.match.params.userId),is_staff:s,last_login:l.last_login,username:l.username,first_name:l.first_name,last_name:l.last_name,email:l.email,date_joined:l.date_joined};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Edit Staff Authentication Level"),r.a.createElement("form",{className:"drop-downs",onSubmit:function(t){t.preventDefault(),V("users",h).then((function(){return e.history.push("/staff/list")}))}},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"First Name: "),r.a.createElement(D.a,{id:"first_name",fullWidth:!0,required:!0,onChange:d,value:l.first_name})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Last Name: "),r.a.createElement(D.a,{id:"last_name",fullWidth:!0,required:!0,onChange:d,value:l.last_name})),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(w.a,{control:r.a.createElement(R.a,{checked:s,onChange:function(){u(!s)},color:"primary"}),label:"Supervisor?"}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),r.a.createElement("div",{className:"submit-button"},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){e.history.push("/staff/list")}},"Skip"))))},xe=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){q("users").then((function(e){e.sort((function(e,t){return e.first_name.localeCompare(t.first_name)})).sort((function(e,t){return t.is_staff-e.is_staff})).sort((function(e,t){return t.is_superuser-e.is_superuser})),c(e)}))}),[]);var o={fontSize:20,paddingBottom:2};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Staff List"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,r.a.createElement(re.a,{style:{fontWeight:600}},"Name"),r.a.createElement(re.a,{style:{fontWeight:600}},"Authorizations"),!0===e.isSupervisor?r.a.createElement(re.a,{style:{fontWeight:600}},"Actions"):null)),r.a.createElement(ne.a,null,l.map((function(t){return r.a.createElement(ie.a,{key:t.id,className:"table_rows"},r.a.createElement(re.a,null,t.first_name," ",t.last_name),!0===t.is_superuser?r.a.createElement(re.a,null,"Admin"):r.a.createElement(r.a.Fragment,null,!0===t.is_staff?r.a.createElement(re.a,null,"Supervisor"):r.a.createElement(re.a,null,"Staff")),!0===e.isSupervisor?r.a.createElement(re.a,null,r.a.createElement("span",{className:"action-icon"},r.a.createElement(ue.b,{onClick:function(){return e.history.push("/staff/edit/".concat(t.id))},style:o}))):null)}))))))},_e=a(128),Ie=a.n(_e),De=a(127),ke=a.n(De),Fe=function(e){var t=e.assignment,a=e.chosenRoute,n=e.removeAssignment;return r.a.createElement("div",{className:"assignment_card"},r.a.createElement("span",null,t.driver.name," "),r.a.createElement("span",{style:{fontWeight:"bold"}},t.driver.phone_number," "),!0===t.driver.isLocal?r.a.createElement("span",{style:{color:"green",fontWeight:"600"}},"L"):null,!0===e.isSupervisor||!0===e.isStaff?r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{className:"assignment_icon",onClick:function(){return n(t.id)},style:{fontSize:20}}),r.a.createElement(ue.a,{className:"assignment_icon",onClick:function(){return e.history.push("/assignment/edit/".concat(t.id,"/").concat(e.route.id,"/").concat(t.driver_id,"/").concat(t.vehicle_id))},style:{fontSize:17}})):null,r.a.createElement(ue.b,{className:"assignment_icon",onClick:function(){return e.history.push("/driver/edit/".concat(t.driver_id,"/").concat(t.vehicle_id))},style:{fontSize:20}}),r.a.createElement("div",null,r.a.createElement("span",{style:{fontWeight:"bold"}},t.vehicle.number," "),r.a.createElement("span",null,t.vehicle.company," "),r.a.createElement("span",{style:{fontWeight:"bold"}},t.vehicle.capacity," "),r.a.createElement("span",null,t.vehicle.kind," "),!0===t.vehicle.isAda?r.a.createElement(ue.c,{style:{color:"red"}}):null),""===a?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,t.start_time.slice(0,-3)," -"," ",t.end_time.slice(0,-3)),r.a.createElement("div",null,t.driver.notes)))},We=(a(72),function(e){var t=e.route,a=e.chosenDate,l=e.chosenRoute,c=Object(n.useState)([]),o=Object(i.a)(c,2),m=o[0],s=o[1];Object(n.useEffect)((function(){T(parseInt(a),t.id).then((function(e){e.sort((function(e,t){return e.vehicle.number>t.vehicle.number?-1:1})).sort((function(e,t){return e.vehicle.number.length>t.vehicle.number.length?1:-1})).sort((function(e,t){return e.vehicle.company.localeCompare(t.vehicle.company)})),s(e)}))}),[a,t.id]);var u=function(e){!0===window.confirm("Are you sure you want to delete this assignment? Deletion cannot be undone.")&&M("assignments",e).then((function(){return T(parseInt(a),t.id).then((function(e){s(e)}))}))},d="";d=parseInt(t.name)<10?t.name.slice(1):t.name;var h={color:t.color,fontWeight:"600"},E={borderColor:t.color};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"route_border",style:E},!0===isNaN(t.name)?r.a.createElement(W.a,{component:"h6",className:"route_name",style:h},d," ",t.description):r.a.createElement(W.a,{component:"h6",className:"route_name",style:h},"Route ",d," ",t.description),!0===e.isSupervisor||!0===e.isStaff?r.a.createElement(Ie.a,{className:"route_icon",onClick:function(){return e.history.push("/assignment/add/".concat(e.route.id))},style:{fontSize:20},value:t.id}):null,r.a.createElement("div",null,m.map((function(t){return r.a.createElement(Fe,Object.assign({key:t.id,assignment:t,chosenRoute:l,removeAssignment:u},e))})))))}),we=function(e){var t=e.dates,a=e.routes,n=e.chosenDate,l=e.chosenRoute,c=e.handleChosenDateChange,i=e.handleChosenRouteChange,o=a.filter((function(e){return e.name.includes(l)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5",className:"page-header"},"Route View"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"date_id",native:!0,onChange:c,fullWidth:!0,required:!0,value:n},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"Choose Date"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id),"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:i,fullWidth:!0,required:!0,value:l},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))))),""!==n?r.a.createElement("div",{className:"route_card"},o.map((function(t){return r.a.createElement(We,Object.assign({key:t.id,route:t,chosenDate:n,chosenRoute:l},e))}))):null)},Re=function(e){var t=e.dates,a=e.routes,l=e.chosenDateId,c=e.chosenDateName,o=e.chosenRoute,m=e.handleChosenDateChange,s=e.handleChosenRouteChange,u=Object(n.useState)([]),d=Object(i.a)(u,2),h=d[0],E=d[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),v=f[0],g=f[1],b=h.filter((function(e){return e.route.name.includes(o)})).filter((function(e){return e.date.date.includes(c)})).filter((function(e){return e.driver.name.toLowerCase().includes(v)||e.driver.notes.toLowerCase().includes(v)||e.vehicle.company.toLowerCase().includes(v)||e.vehicle.number.includes(v)})).sort((function(e,t){return e.route.name.localeCompare(t.route.name)})).sort((function(e,t){return e.vehicle.company.localeCompare(t.vehicle.company)})).sort((function(e,t){return e.date.date.localeCompare(t.date.date)}));Object(n.useEffect)((function(){q("assignments").then((function(e){e.sort((function(e,t){return e.driver.name.localeCompare(t.driver.name)})),E(e)}))}),[]);var y=0;return 0!==b.length&&(y=b.length),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Driver List"),r.a.createElement("div",{className:"drop-downs"},r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Date:"),r.a.createElement(F.a,{id:"dateId",native:!0,onChange:m,fullWidth:!0,required:!0,value:l},r.a.createElement("option",{"aria-label":"None",value:"","data-name":""},"All Dates"),t?t.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,"data-name":e.date},e.date)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,null,"Route:"),r.a.createElement(F.a,{id:"routeId",native:!0,onChange:s,fullWidth:!0,required:!0,value:o},r.a.createElement("option",{"aria-label":"None",value:""},"All Routes"),a?a.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name," ",e.description)})):r.a.createElement(r.a.Fragment,null))),r.a.createElement(_.a,{item:!0,xs:12,md:3},r.a.createElement(k.a,{htmlFor:"age-native-simple"},"Search:"),r.a.createElement(D.a,{type:"text",id:"keyword",fullWidth:!0,onChange:function(e){g(e.target.value.toLowerCase())},value:v})))),r.a.createElement(W.a,{variant:"h6"},y," drivers"),r.a.createElement(le.a,null,r.a.createElement(ae.a,{size:"small"},r.a.createElement(ce.a,null,r.a.createElement(ie.a,null,""===l?r.a.createElement(re.a,{style:{fontWeight:600}},"Date"):null,r.a.createElement(re.a,{style:{fontWeight:600}},"Name",r.a.createElement("div",null,"Number")),r.a.createElement(re.a,{style:{fontWeight:600}},"Company",r.a.createElement("div",null,"Vehicle #")),""===o?r.a.createElement(re.a,{style:{fontWeight:600}},"Route"):null,r.a.createElement(re.a,{style:{fontWeight:600}},"Local"),r.a.createElement(re.a,{style:{fontWeight:600}},"Notes"),r.a.createElement(re.a,{style:{fontWeight:600}},"Actions"))),r.a.createElement(ne.a,null,b.map((function(t){return r.a.createElement(ie.a,{key:t.id,className:"table_rows"},""===l?r.a.createElement(re.a,null,t.date.date.slice(5)):null,r.a.createElement(re.a,{className:"list_name"},t.driver.name,r.a.createElement("div",null,t.driver.phone_number)),r.a.createElement(re.a,{className:"list_phone"},t.vehicle.company,r.a.createElement("div",null,t.vehicle.number)),""===o?r.a.createElement(r.a.Fragment,null,parseInt(t.route.name)<10?r.a.createElement(re.a,null,t.route.name.slice(1)):r.a.createElement(re.a,null,t.route.name)):null,!0===t.driver.isLocal?r.a.createElement(re.a,{className:"is_local"},"Local"):r.a.createElement(re.a,null),r.a.createElement(re.a,{className:"list_notes"},t.driver.notes),r.a.createElement(re.a,null,r.a.createElement("span",{className:"action-icon"},r.a.createElement(ue.b,{style:{fontSize:20},onClick:function(){return e.history.push("/driver/edit/".concat(t.driver_id,"/").concat(t.vehicle_id))}}))))}))))))},Ae=function(e){var t=e.hasUser,a=e.isSupervisor,l=e.isStaff,c=e.dates,o=e.routes,s=e.chosenDateId,u=e.chosenDateName,d=e.chosenRoute,h=e.handleChosenRouteChange,E=e.handleChosenDateChange,p=e.getDates,f=e.getShuttles,v=e.getRoutes,g=e.getPlaces,b=Object(n.useState)(1),y=Object(i.a)(b,2),C=y[0],S=y[1],N=Object(n.useState)(1),j=Object(i.a)(N,2),O=j[0],x=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/route/view"})}}),r.a.createElement(m.b,{exact:!0,path:"/date/form",render:function(){return t?r.a.createElement(Ee,Object.assign({getDates:p},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/shuttle/form",render:function(){return t?r.a.createElement(pe,Object.assign({getShuttles:f},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/route/form",render:function(){return t?r.a.createElement(fe,Object.assign({getRoutes:v},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/location/form",render:function(){return t?r.a.createElement(ve,Object.assign({routes:o,getPlaces:g},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/driver/form",render:function(e){return t?r.a.createElement(ge,Object.assign({setDriverId:S},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/driver/edit/:driverId(\\d+)/:vehicleId(\\d+)",render:function(e){return t?r.a.createElement(be,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/vehicle/form",render:function(e){return t?r.a.createElement(ye,Object.assign({setVehicleId:x},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/vehicle/edit/:driverId(\\d+)/:vehicleId(\\d+)",render:function(e){return t?r.a.createElement(Ce,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/form",render:function(e){return t?r.a.createElement(Se,Object.assign({chosenDate:s,handleChosenDateChange:E,driverId:C,vehicleId:O},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/add/:routeId(\\d+)",render:function(e){return t?r.a.createElement(Ne,Object.assign({chosenDate:s,handleChosenDateChange:E},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/assignment/edit/:assignmentId(\\d+)/:routeId(\\d+)/:driverId(\\d+)/:vehicleId(\\d+)",render:function(e){return t?r.a.createElement(je,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/staff/edit/:userId(\\d+)",render:function(e){return t?r.a.createElement(Oe,e):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/route/view",render:function(e){return t?r.a.createElement(we,Object.assign({isStaff:l,isSupervisor:a,dates:c,routes:o,chosenDate:s,chosenRoute:d,handleChosenDateChange:E,handleChosenRouteChange:h},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/driver/list",render:function(e){return t?r.a.createElement(Re,Object.assign({dates:c,routes:o,chosenDateId:s,chosenDateName:u,chosenRoute:d,handleChosenDateChange:E,handleChosenRouteChange:h},e)):r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/staff/list",render:function(e){return t?r.a.createElement(xe,Object.assign({isStaff:l,isSupervisor:a},e)):r.a.createElement(m.a,{to:"/login"})}}))},qe=a(295),Le=a(294),Pe=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(i.a)(t,2),l=a[0],c=a[1],m=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{onSubmit:function(t){t.preventDefault();var a={username:l.username,password:l.password};H(a).then((function(t){"token"in t?(e.setUserToken(t),e.findSupervisor(),e.history.push("/")):alert("User/password combination not found.")}))}},r.a.createElement(_.a,{container:!0,component:"main"},r.a.createElement(qe.a,null),r.a.createElement(_.a,null,r.a.createElement("div",null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{noValidate:!0},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:m}),r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:m}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In"),r.a.createElement(_.a,{container:!0},r.a.createElement(_.a,{item:!0},r.a.createElement("br",null),r.a.createElement(o.b,{to:"/register",variant:"body2"},"Don't have an account? Sign Up"))))))))))},Te=a(130),ze=function(e){var t=Object(n.useState)({username:"",email:"",password:"",firstName:"",lastName:""}),a=Object(i.a)(t,2),l=a[0],c=a[1],m=function(e){var t=Object(x.a)({},l);t[e.target.id]=e.target.value,c(t)};return r.a.createElement(Le.a,{component:"main",maxWidth:"xs"},r.a.createElement(qe.a,null),r.a.createElement("div",null,r.a.createElement(W.a,{component:"h1",variant:"h5"},"Create new account"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=[];for(var n in l)""===l[n].trim()&&function(){var e=[];Object(Te.a)(n).forEach((function(t){t===t.toUpperCase()&&e.push(" "),e.push(t.toLowerCase())})),a.push(e.join(""))}();var r={username:l.username.trim(),email:l.email.trim(),password:l.password,first_name:l.firstName.trim(),last_name:l.lastName.trim()};U(r).then((function(t){"token"in t&&(e.setUserToken(t),e.history.push("/entry/form"))})).catch((function(){alert("This username has already been taken, please try a different one")}))},autoComplete:"on"},r.a.createElement(_.a,{container:!0,spacing:2},r.a.createElement(_.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{autoComplete:"fname",margin:"normal",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:m})),r.a.createElement(_.a,{item:!0,xs:12,sm:6},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:m})),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:m})),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:m})),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:m}))),r.a.createElement("br",null),r.a.createElement(I.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Submit")),r.a.createElement(_.a,{container:!0,justify:"flex-end"},r.a.createElement(_.a,{item:!0},r.a.createElement("br",null),r.a.createElement(o.b,{to:"/",variant:"body2"},"Already have an account? Sign in")))))},Be=function(e){var t=function(){return null!==sessionStorage.getItem("token")},a=Object(n.useState)(t()),l=Object(i.a)(a,2),c=l[0],s=l[1],u=Object(n.useState)(Boolean),d=Object(i.a)(u,2),h=d[0],E=d[1],p=Object(n.useState)(Boolean),f=Object(i.a)(p,2),v=f[0],g=f[1],b=function(){L("users",sessionStorage.getItem("userID")).then((function(e){E(e.is_superuser),g(e.is_staff)}))},y=function(e){sessionStorage.setItem("token",e.token),sessionStorage.setItem("userID",e.user_id),s(t())},C=Object(n.useState)(!1),S=Object(i.a)(C,2),N=S[0],j=S[1],x=Object(n.useState)([]),_=Object(i.a)(x,2),I=_[0],D=_[1],k=Object(n.useState)([]),F=Object(i.a)(k,2),W=F[0],w=F[1],R=Object(n.useState)([]),A=Object(i.a)(R,2),P=A[0],T=A[1],z=Object(n.useState)([]),B=Object(i.a)(z,2),V=B[0],M=B[1],U=Object(n.useState)([]),H=Object(i.a)(U,2),J=H[0],Y=H[1],G=Object(n.useState)(""),K=Object(i.a)(G,2),Q=K[0],X=K[1],Z=Object(n.useState)(""),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(i.a)(ae,2),re=ne[0],le=ne[1],ce=Object(n.useState)(""),ie=Object(i.a)(ce,2),oe=ie[0],me=ie[1],se=Object(n.useState)(""),ue=Object(i.a)(se,2),de=ue[0],Ee=ue[1],pe=Object(n.useState)(""),fe=Object(i.a)(pe,2),ve=fe[0],ge=fe[1],be=Object(n.useState)(""),ye=Object(i.a)(be,2),Ce=ye[0],Se=ye[1],Ne=function(){q("dates").then((function(e){e.sort((function(e,t){return e.date.localeCompare(t.date)})),D(e)}))},je=function(){q("shuttles").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),w(e)}))},Oe=function(){q("routes").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),T(e)}))},xe=function(){q("places").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),M(e)}))},_e=function(e){var t=e.target.value;Ee(t),ge(""),Se(""),q("places").then((function(e){M(""!==t?e.filter((function(e){return e.route.name===t})).sort((function(e,t){return e.name.localeCompare(t.name)})):e.sort((function(e,t){return e.name.localeCompare(t.name)})))}))},Ie=function(e){X(e.target.value),te(e.target.options[e.target.selectedIndex].dataset.name)};return Object(n.useEffect)((function(){Ne(),je(),Oe(),xe()}),[]),r.a.createElement(o.a,null,r.a.createElement(r.a.Fragment,null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,Object.assign({hasUser:c,clearUser:function(){sessionStorage.clear(),s(t()),E(!1),g(!1),Ee("")},isSupervisor:h,isStaff:v,mode:N,handleModeChange:function(){j(!N),b()}},e)),r.a.createElement(r.a.Fragment,null,!1===N?r.a.createElement(he,Object.assign({hasUser:c,isSupervisor:h,dates:I,shuttles:W,routes:P,places:V,entries:J,chosenDateId:Q,chosenDateName:ee,chosenShuttleId:re,chosenShuttleName:oe,chosenRoute:de,chosenPlaceId:ve,chosenPlaceName:Ce,getEntries:function(){q("entries").then((function(e){Y(e)}))},handleChosenPlaceChange:function(e){ge(e.target.value),Se(e.target.options[e.target.selectedIndex].dataset.name),""!==e.target.value||q("routes").then((function(e){e.sort((function(e,t){return e.name.localeCompare(t.name)})),T(e)}))},handleChosenRouteChange:_e,handleChosenShuttleChange:function(e){le(e.target.value),me(e.target.options[e.target.selectedIndex].dataset.name)},handleChosenDateChange:Ie},e)):r.a.createElement(Ae,Object.assign({hasUser:c,isSupervisor:h,isStaff:v,dates:I,routes:P,chosenDateId:Q,chosenDateName:ee,chosenRoute:de,handleChosenRouteChange:_e,handleChosenDateChange:Ie,getDates:Ne,getShuttles:je,getRoutes:Oe,getPlaces:xe},e)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{exact:!0,path:"/",render:function(){return r.a.createElement(m.a,{to:"/login"})}}),r.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(Pe,Object.assign({setUserToken:y,findSupervisor:b},e))}}),r.a.createElement(m.b,{exact:!0,path:"/register",render:function(e){return r.a.createElement(ze,Object.assign({setUserToken:y},e))}}))))};c.a.render(r.a.createElement(Be,null),document.getElementById("root"))},72:function(e,t,a){}},[[140,1,2]]]);
//# sourceMappingURL=main.010deda0.chunk.js.map