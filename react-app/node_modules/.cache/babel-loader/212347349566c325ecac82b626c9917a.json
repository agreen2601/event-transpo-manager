{"ast":null,"code":"var _jsxFileName = \"/Users/MainTechPiece/workspace/event-transpo-manager/react-app/src/routeView/RouteCard.js\";\nimport React, { useEffect, useState } from \"../../node_modules/react\";\nimport apiManager from \"../api/apiManager\";\nimport AssignmentCard from \"./AssignmentCard\"; // import { IoIosStarOutline } from \"react-icons/io\";\n// import { IoIosStar } from \"react-icons/io\";\n// import { IoMdAddCircleOutline } from \"react-icons/io\";\n\nconst RouteCard = props => {\n  const [assignments, setAssignments] = useState([]);\n  const [favoriteRouteIDs, setFavoriteRouteIDs] = useState([]);\n  const [favId, setFavId] = useState([]);\n  const [favorite, setFavorite] = useState({\n    userId: parseInt(sessionStorage.getItem(\"userId\")),\n    routeId: props.route.id\n  });\n  const userId = sessionStorage.getItem(\"userId\");\n\n  const getFavoriteRoutes = userID => {\n    apiManager.getFavorites(userID).then(favs => {\n      const match = favs.find(fav => fav.routeId === props.route.id);\n\n      if (match !== undefined) {\n        setFavoriteRouteIDs(match.routeId);\n        setFavId(match.id);\n      }\n    });\n  };\n\n  getFavoriteRoutes(userId);\n\n  const getAssignments = (dateId, routeId) => {\n    apiManager.getAssignmentsByDateRoute(dateId, routeId).then(APIResult => {\n      setAssignments(APIResult);\n    });\n  };\n\n  const removeAssignment = (type, id, dateId, routeId) => {\n    apiManager.deleteTypeWithId(type, id).then(() => apiManager.getAssignmentsByDateRoute(dateId, routeId).then(APIResult => {\n      setAssignments(APIResult);\n    }));\n  };\n\n  const star = () => {\n    apiManager.addType(\"favoriteRoutes\", favorite).then(APIResult => {\n      setFavorite(APIResult);\n    });\n    getFavoriteRoutes(userId);\n  };\n\n  const unStar = () => {\n    apiManager.deleteTypeWithId(\"favoriteRoutes\", favId);\n    getFavoriteRoutes(userId);\n  };\n\n  useEffect(() => {\n    getAssignments(props.date.id, props.route.id);\n  }, [props.date.id, props.route.id, userId]); // const routeHeader = {\n  //   color: props.route.color,\n  //   fontSize: \"larger\",\n  //   fontWeight: 600,\n  //   marginRight: \"20px\"\n  // };\n  // const routeBorder = {\n  //   borderColor: props.route.color\n  // };\n  // let routeNumber = props.route.number;\n  // if (props.route.number.startsWith(\"0\")) {\n  //   routeNumber = props.route.number.split(\"0\")[1];\n  // }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"route_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"Route\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"assigned\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"(\", assignments.length, \" assigned -\", \"\\u00A0\", props.route.numOfVehNeeded - assignments.length, \" needed)\"), favoriteRouteIDs.length !== 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"route_icon\",\n    \"id-\": \"unStar\",\n    onClick: unStar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"unstar\") : null, favoriteRouteIDs.length === 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"route_icon\",\n    id: \"star\",\n    onClick: star,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"star\") : null), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"add_driver_icon\",\n    onClick: () => props.history.push(`/add/${props.route.id}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"add driver\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, assignments.map(assignment => /*#__PURE__*/React.createElement(AssignmentCard, Object.assign({\n    key: assignment.id,\n    assignment: assignment,\n    removeAssignment: removeAssignment\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }))))));\n};\n\nexport default RouteCard;","map":{"version":3,"sources":["/Users/MainTechPiece/workspace/event-transpo-manager/react-app/src/routeView/RouteCard.js"],"names":["React","useEffect","useState","apiManager","AssignmentCard","RouteCard","props","assignments","setAssignments","favoriteRouteIDs","setFavoriteRouteIDs","favId","setFavId","favorite","setFavorite","userId","parseInt","sessionStorage","getItem","routeId","route","id","getFavoriteRoutes","userID","getFavorites","then","favs","match","find","fav","undefined","getAssignments","dateId","getAssignmentsByDateRoute","APIResult","removeAssignment","type","deleteTypeWithId","star","addType","unStar","date","length","numOfVehNeeded","history","push","map","assignment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"../../node_modules/react\";\nimport apiManager from \"../api/apiManager\";\nimport AssignmentCard from \"./AssignmentCard\";\n// import { IoIosStarOutline } from \"react-icons/io\";\n// import { IoIosStar } from \"react-icons/io\";\n// import { IoMdAddCircleOutline } from \"react-icons/io\";\n\nconst RouteCard = props => {\n  const [assignments, setAssignments] = useState([]);\n  const [favoriteRouteIDs, setFavoriteRouteIDs] = useState([]);\n  const [favId, setFavId] = useState([]);\n  const [favorite, setFavorite] = useState({\n    userId: parseInt(sessionStorage.getItem(\"userId\")),\n    routeId: props.route.id\n  });\n  const userId = sessionStorage.getItem(\"userId\")\n\n  const getFavoriteRoutes = (userID) => {\n    apiManager.getFavorites(userID).then(favs => {\n      const match = favs.find(fav => fav.routeId === props.route.id);\n      if (match !== undefined) {\n        setFavoriteRouteIDs(match.routeId);\n        setFavId(match.id);\n      }\n    });\n  };\n\n  getFavoriteRoutes(userId)\n\n  const getAssignments = (dateId, routeId) => {\n    apiManager.getAssignmentsByDateRoute(dateId, routeId).then(APIResult => {\n      setAssignments(APIResult);\n    });\n  };\n\n  const removeAssignment = (type, id, dateId, routeId) => {\n    apiManager.deleteTypeWithId(type, id).then(() =>\n      apiManager.getAssignmentsByDateRoute(dateId, routeId).then(APIResult => {\n        setAssignments(APIResult);\n      })\n    );\n  };\n\n  const star = () => {\n    apiManager.addType(\"favoriteRoutes\", favorite).then(APIResult => {\n      setFavorite(APIResult);\n    });\n    getFavoriteRoutes(userId);\n  };\n\n  const unStar = () => {\n    apiManager.deleteTypeWithId(\"favoriteRoutes\", favId)\n    getFavoriteRoutes(userId);\n  };\n\n  useEffect(() => {\n    getAssignments(props.date.id, props.route.id);\n  }, [props.date.id, props.route.id, userId]);\n\n  // const routeHeader = {\n  //   color: props.route.color,\n  //   fontSize: \"larger\",\n  //   fontWeight: 600,\n  //   marginRight: \"20px\"\n  // };\n\n  // const routeBorder = {\n  //   borderColor: props.route.color\n  // };\n\n  // let routeNumber = props.route.number;\n  // if (props.route.number.startsWith(\"0\")) {\n  //   routeNumber = props.route.number.split(\"0\")[1];\n  // }\n\n  return (\n    <>\n      {/* <div style={routeBorder} className=\"route_border\"> */}\n      <div>\n        <div className=\"route_heading\">\n          {/* <span style={routeHeader}>Route {routeNumber} </span> */}\n          <span>Route</span>\n          <span className=\"assigned\">\n            ({assignments.length} assigned -{\"\\u00A0\"}\n            {props.route.numOfVehNeeded - assignments.length} needed)\n          </span>\n          {favoriteRouteIDs.length !== 0 ? (\n            <span className=\"route_icon\" id-=\"unStar\" onClick={unStar}>unstar</span>\n          ) : null}\n          {favoriteRouteIDs.length === 0 ? (\n            <span className=\"route_icon\" id=\"star\" onClick={star} >star</span>\n          ) : null}\n        </div>\n        <span\n          className=\"add_driver_icon\"\n          onClick={() => props.history.push(`/add/${props.route.id}`)}\n        >add driver</span>\n        <div>\n          {assignments.map(assignment => (\n            <AssignmentCard\n              key={assignment.id}\n              assignment={assignment}\n              removeAssignment={removeAssignment}\n              {...props}\n            />\n          ))}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default RouteCard;\n"]},"metadata":{},"sourceType":"module"}