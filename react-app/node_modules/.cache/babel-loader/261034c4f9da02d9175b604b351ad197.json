{"ast":null,"code":"var _jsxFileName = \"/Users/MainTechPiece/workspace/final-capstone-react-app/src/auth/register.js\";\nimport React, { useEffect, useState } from \"react\";\nimport RegisterForm from \"../forms/registerForm\";\nimport apiManager from \"../api/apiManager\";\n\nconst Register = props => {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    firstName: null,\n    lastName: \"\"\n  });\n  const [failedLogin, setFailedLogin] = useState(false);\n  const [failedLoginMessage, setFailedLoginMessage] = useState(\"false\");\n\n  const handleFieldChange = evt => {\n    const stateToChange = { ...formData\n    };\n    stateToChange[evt.target.id] = evt.target.value;\n    setFormData(stateToChange);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let errors = [];\n\n    for (let item in formData) {\n      if (formData[item].trim() == \"\") {\n        let newItem = [];\n        [...item].forEach(element => {\n          if (element == element.toUpperCase()) {\n            newItem.push(\" \");\n          }\n\n          newItem.push(element.toLowerCase());\n        });\n        errors.push(newItem.join(\"\"));\n      }\n    }\n\n    if (errors.length > 0) {\n      setFailedLogin(true);\n      setFailedLoginMessage(\"The following must not only contain spaces: \" + errors.join(\", \"));\n    } else {\n      const user = {\n        username: formData.username.trim(),\n        email: formData.email.trim(),\n        password: formData.password,\n        first_name: formData.firstName.trim(),\n        last_name: formData.lastName.trim()\n      };\n      apiManager.register(user).then(resp => {\n        if (\"token\" in resp) {\n          props.setUserToken(resp);\n          props.history.push(\"/\");\n        }\n      }) // With a 500 HTTP error, no response is given,\n      // so the error must be handled with .catch\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n      .catch(() => {\n        setFailedLogin(true);\n        setFailedLoginMessage(\"The username you entered is already in use, please try again.\");\n      });\n    }\n  };\n\n  useEffect(() => {}, [failedLogin]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"register-form-view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(RegisterForm, {\n    handleFieldChange: handleFieldChange,\n    failedLogin: failedLogin,\n    failedLoginMessage: failedLoginMessage,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Register;","map":{"version":3,"sources":["/Users/MainTechPiece/workspace/final-capstone-react-app/src/auth/register.js"],"names":["React","useEffect","useState","RegisterForm","apiManager","Register","props","formData","setFormData","username","email","password","firstName","lastName","failedLogin","setFailedLogin","failedLoginMessage","setFailedLoginMessage","handleFieldChange","evt","stateToChange","target","id","value","handleSubmit","e","preventDefault","errors","item","trim","newItem","forEach","element","toUpperCase","push","toLowerCase","join","length","user","first_name","last_name","register","then","resp","setUserToken","history","catch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport RegisterForm from \"../forms/registerForm\";\nimport apiManager from \"../api/apiManager\";\n\nconst Register = (props) => {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    firstName: null,\n    lastName: \"\",\n  });\n  const [failedLogin, setFailedLogin] = useState(false);\n  const [failedLoginMessage, setFailedLoginMessage] = useState(\"false\");\n\n  const handleFieldChange = (evt) => {\n    const stateToChange = { ...formData };\n    stateToChange[evt.target.id] = evt.target.value;\n    setFormData(stateToChange);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    let errors = [];\n    for (let item in formData) {\n      if (formData[item].trim() == \"\") {\n        let newItem = [];\n        [...item].forEach((element) => {\n          if (element == element.toUpperCase()) {\n            newItem.push(\" \");\n          }\n          newItem.push(element.toLowerCase());\n        });\n        errors.push(newItem.join(\"\"));\n      }\n    }\n\n    if (errors.length > 0) {\n      setFailedLogin(true);\n      setFailedLoginMessage(\n        \"The following must not only contain spaces: \" + errors.join(\", \")\n      );\n    } else {\n      const user = {\n        username: formData.username.trim(),\n        email: formData.email.trim(),\n        password: formData.password,\n        first_name: formData.firstName.trim(),\n        last_name: formData.lastName.trim(),\n      };\n\n      apiManager\n        .register(user)\n        .then((resp) => {\n          if (\"token\" in resp) {\n            props.setUserToken(resp);\n            props.history.push(\"/\");\n          }\n        })\n        // With a 500 HTTP error, no response is given,\n        // so the error must be handled with .catch\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n        .catch(() => {\n          setFailedLogin(true);\n          setFailedLoginMessage(\n            \"The username you entered is already in use, please try again.\"\n          );\n        });\n    }\n  };\n\n  useEffect(() => {}, [failedLogin]);\n\n  return (\n    <div className=\"register-form-view\">\n      <RegisterForm\n        handleFieldChange={handleFieldChange}\n        failedLogin={failedLogin}\n        failedLoginMessage={failedLoginMessage}\n        handleSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}