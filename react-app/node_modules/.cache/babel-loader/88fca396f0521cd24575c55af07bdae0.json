{"ast":null,"code":"var _jsxFileName = \"/Users/MainTechPiece/workspace/event-transpo-manager/react-app/src/routeView/routeCard.js\";\nimport React, { useEffect, useState } from \"../../node_modules/react\";\nimport apiManager from \"../api/apiManager\";\nimport AssignmentCard from \"./assignmentCard\"; // import { IoIosStarOutline } from \"react-icons/io\";\n// import { IoIosStar } from \"react-icons/io\";\n// import { IoMdAddCircleOutline } from \"react-icons/io\";\n\nconst RouteCard = props => {\n  const chosenDate = props.chosenDate;\n  const route = props.route;\n  const [assignments, setAssignments] = useState([]);\n  useEffect(() => {\n    apiManager.getAssignmentsByDateRoute(parseInt(chosenDate), route.id).then(r => {\n      setAssignments(r);\n    });\n  }, [chosenDate]); // const [assignments, setAssignments] = useState([]);\n\n  const [favoriteRouteIDs, setFavoriteRouteIDs] = useState([]);\n  const [favId, setFavId] = useState([]);\n  const [favorite, setFavorite] = useState({\n    userId: parseInt(sessionStorage.getItem(\"userId\")),\n    routeId: props.route.id\n  });\n  const userId = sessionStorage.getItem(\"userId\");\n\n  const getFavoriteRoutes = userID => {\n    apiManager.getFavorites(userID).then(favs => {\n      const match = favs.find(fav => fav.routeId === props.route.id);\n\n      if (match !== undefined) {\n        setFavoriteRouteIDs(match.routeId);\n        setFavId(match.id);\n      }\n    });\n  };\n\n  getFavoriteRoutes(userId); // const getAssignments = (dateId, routeId) => {\n  //   apiManager.getAssignmentsByDateRoute(dateId, routeId).then((APIResult) => {\n  //     setAssignments(APIResult);\n  //   });\n  // };\n\n  const removeAssignment = (type, id, dateId, routeId) => {\n    apiManager.deleteTypeWithId(type, id).then(() => apiManager.getAssignmentsByDateRoute(dateId, routeId).then(APIResult => {\n      setAssignments(APIResult);\n    }));\n  };\n\n  const star = () => {\n    apiManager.addType(\"favoriteRoutes\", favorite).then(APIResult => {\n      setFavorite(APIResult);\n    });\n    getFavoriteRoutes(userId);\n  };\n\n  const unStar = () => {\n    apiManager.deleteTypeWithId(\"favoriteRoutes\", favId);\n    getFavoriteRoutes(userId);\n  }; // useEffect(() => {\n  //   getAssignments(props.date.id, props.route.id);\n  // }, [props.date.id, props.route.id, userId]);\n  // const routeHeader = {\n  //   color: props.route.color,\n  //   fontSize: \"larger\",\n  //   fontWeight: 600,\n  //   marginRight: \"20px\"\n  // };\n  // const routeBorder = {\n  //   borderColor: props.route.color\n  // };\n  // let routeNumber = props.route.number;\n  // if (props.route.number.startsWith(\"0\")) {\n  //   routeNumber = props.route.number.split(\"0\")[1];\n  // }\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"route_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Route \", route.name, \" \", route.description), favoriteRouteIDs.length !== 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"route_icon\",\n    \"id-\": \"unStar\",\n    onClick: unStar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, \"unstar\") : null, favoriteRouteIDs.length === 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"route_icon\",\n    id: \"star\",\n    onClick: star,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"star\") : null), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"add_driver_icon\",\n    onClick: () => props.history.push(`/add/${props.route.id}`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, \"add driver\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, assignments.map(assignment => /*#__PURE__*/React.createElement(AssignmentCard, Object.assign({\n    key: assignment.id,\n    assignment: assignment,\n    removeAssignment: removeAssignment\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }))))));\n};\n\nexport default RouteCard;","map":{"version":3,"sources":["/Users/MainTechPiece/workspace/event-transpo-manager/react-app/src/routeView/routeCard.js"],"names":["React","useEffect","useState","apiManager","AssignmentCard","RouteCard","props","chosenDate","route","assignments","setAssignments","getAssignmentsByDateRoute","parseInt","id","then","r","favoriteRouteIDs","setFavoriteRouteIDs","favId","setFavId","favorite","setFavorite","userId","sessionStorage","getItem","routeId","getFavoriteRoutes","userID","getFavorites","favs","match","find","fav","undefined","removeAssignment","type","dateId","deleteTypeWithId","APIResult","star","addType","unStar","name","description","length","history","push","map","assignment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"../../node_modules/react\";\nimport apiManager from \"../api/apiManager\";\nimport AssignmentCard from \"./assignmentCard\";\n// import { IoIosStarOutline } from \"react-icons/io\";\n// import { IoIosStar } from \"react-icons/io\";\n// import { IoMdAddCircleOutline } from \"react-icons/io\";\n\nconst RouteCard = (props) => {\n  const chosenDate = props.chosenDate;\n  const route = props.route;\n  const [assignments, setAssignments] = useState([]);\n\n  useEffect(() => {\n    apiManager\n      .getAssignmentsByDateRoute(parseInt(chosenDate), route.id)\n      .then((r) => {\n        setAssignments(r);\n      });\n  }, [chosenDate]);\n\n  // const [assignments, setAssignments] = useState([]);\n  const [favoriteRouteIDs, setFavoriteRouteIDs] = useState([]);\n  const [favId, setFavId] = useState([]);\n  const [favorite, setFavorite] = useState({\n    userId: parseInt(sessionStorage.getItem(\"userId\")),\n    routeId: props.route.id,\n  });\n  const userId = sessionStorage.getItem(\"userId\");\n\n  const getFavoriteRoutes = (userID) => {\n    apiManager.getFavorites(userID).then((favs) => {\n      const match = favs.find((fav) => fav.routeId === props.route.id);\n      if (match !== undefined) {\n        setFavoriteRouteIDs(match.routeId);\n        setFavId(match.id);\n      }\n    });\n  };\n\n  getFavoriteRoutes(userId);\n\n  // const getAssignments = (dateId, routeId) => {\n  //   apiManager.getAssignmentsByDateRoute(dateId, routeId).then((APIResult) => {\n  //     setAssignments(APIResult);\n  //   });\n  // };\n\n  const removeAssignment = (type, id, dateId, routeId) => {\n    apiManager.deleteTypeWithId(type, id).then(() =>\n      apiManager\n        .getAssignmentsByDateRoute(dateId, routeId)\n        .then((APIResult) => {\n          setAssignments(APIResult);\n        })\n    );\n  };\n\n  const star = () => {\n    apiManager.addType(\"favoriteRoutes\", favorite).then((APIResult) => {\n      setFavorite(APIResult);\n    });\n    getFavoriteRoutes(userId);\n  };\n\n  const unStar = () => {\n    apiManager.deleteTypeWithId(\"favoriteRoutes\", favId);\n    getFavoriteRoutes(userId);\n  };\n\n  // useEffect(() => {\n  //   getAssignments(props.date.id, props.route.id);\n  // }, [props.date.id, props.route.id, userId]);\n\n  // const routeHeader = {\n  //   color: props.route.color,\n  //   fontSize: \"larger\",\n  //   fontWeight: 600,\n  //   marginRight: \"20px\"\n  // };\n\n  // const routeBorder = {\n  //   borderColor: props.route.color\n  // };\n\n  // let routeNumber = props.route.number;\n  // if (props.route.number.startsWith(\"0\")) {\n  //   routeNumber = props.route.number.split(\"0\")[1];\n  // }\n\n  return (\n    <>\n      {/* <div style={routeBorder} className=\"route_border\"> */}\n      <div>\n        <div className=\"route_heading\">\n          {/* <span style={routeHeader}>Route {routeNumber} </span> */}\n          <span>\n            Route {route.name} {route.description}\n          </span>\n          {/* <span className=\"assigned\">\n            ({assignments.length} assigned -{\"\\u00A0\"}\n            {props.route.numOfVehNeeded - assignments.length} needed)\n          </span> */}\n          {favoriteRouteIDs.length !== 0 ? (\n            <span className=\"route_icon\" id-=\"unStar\" onClick={unStar}>\n              unstar\n            </span>\n          ) : null}\n          {favoriteRouteIDs.length === 0 ? (\n            <span className=\"route_icon\" id=\"star\" onClick={star}>\n              star\n            </span>\n          ) : null}\n        </div>\n        <span\n          className=\"add_driver_icon\"\n          onClick={() => props.history.push(`/add/${props.route.id}`)}\n        >\n          add driver\n        </span>\n        <div>\n          {assignments.map((assignment) => (\n            <AssignmentCard\n              key={assignment.id}\n              assignment={assignment}\n              removeAssignment={removeAssignment}\n              {...props}\n            />\n          ))}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default RouteCard;\n"]},"metadata":{},"sourceType":"module"}