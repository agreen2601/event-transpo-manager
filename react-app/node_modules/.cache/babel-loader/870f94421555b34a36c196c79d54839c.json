{"ast":null,"code":"import baseurl from \"./baseurl\";\nimport React, { useState, useEffect } from \"react\";\nconst [token, setToken] = useState(\"\");\n\nconst getToken = () => {\n  setToken(window.sessionStorage.getItem(\"token\"));\n};\n\nconsole.log(token); // watch from change in chosenlocation and update chosenroute at the same time\n\nuseEffect(() => {\n  getToken();\n}, [window.sessionStorage.getItem(\"token\")]);\nexport default {\n  getAllEntries() {\n    return fetch(`${baseurl}/entries`).then(r => r.json());\n  },\n\n  getSingleLocation(locationId) {\n    return fetch(`${baseurl}/locations/${locationId}`).then(r => r.json());\n  },\n\n  getEntriesByLocation(locationId) {\n    return fetch(`${baseurl}/entries?locationID=${locationId}`).then(r => r.json());\n  },\n\n  getEntriesByLocationAndEvent(locationId, eventID) {\n    return fetch(`${baseurl}/entries?locationID=${locationId}&eventID=${eventID}`).then(r => r.json());\n  },\n\n  getAllLocations() {\n    return fetch(`${baseurl}/locations`).then(r => r.json());\n  },\n\n  getAllEvents() {\n    return fetch(`${baseurl}/events`).then(r => r.json());\n  },\n\n  postEntry(newEntry) {\n    return fetch(`${baseurl}/entries`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Token ${token}`\n      },\n      body: JSON.stringify(newEntry)\n    }).then(r => r.json());\n  },\n\n  register(userToPost) {\n    return fetch(`${baseurl}/register/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userToPost)\n    }).then(result => result.json());\n  },\n\n  login(userToLogin) {\n    return fetch(`${baseurl}/login/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userToLogin)\n    }).then(result => result.json());\n  }\n\n};","map":{"version":3,"sources":["/Users/MainTechPiece/workspace/final-capstone-react-app/src/api/apiManager.js"],"names":["baseurl","React","useState","useEffect","token","setToken","getToken","window","sessionStorage","getItem","console","log","getAllEntries","fetch","then","r","json","getSingleLocation","locationId","getEntriesByLocation","getEntriesByLocationAndEvent","eventID","getAllLocations","getAllEvents","postEntry","newEntry","method","headers","Accept","Authorization","body","JSON","stringify","register","userToPost","result","login","userToLogin"],"mappings":"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","sourcesContent":["import baseurl from \"./baseurl\";\nimport React, { useState, useEffect } from \"react\";\n\nconst [token, setToken] = useState(\"\");\nconst getToken = () => {\n  setToken(window.sessionStorage.getItem(\"token\"));\n};\n\nconsole.log(token);\n\n// watch from change in chosenlocation and update chosenroute at the same time\nuseEffect(() => {\n  getToken();\n}, [window.sessionStorage.getItem(\"token\")]);\n\nexport default {\n  getAllEntries() {\n    return fetch(`${baseurl}/entries`).then((r) => r.json());\n  },\n  getSingleLocation(locationId) {\n    return fetch(`${baseurl}/locations/${locationId}`).then((r) => r.json());\n  },\n  getEntriesByLocation(locationId) {\n    return fetch(`${baseurl}/entries?locationID=${locationId}`).then((r) =>\n      r.json()\n    );\n  },\n  getEntriesByLocationAndEvent(locationId, eventID) {\n    return fetch(\n      `${baseurl}/entries?locationID=${locationId}&eventID=${eventID}`\n    ).then((r) => r.json());\n  },\n  getAllLocations() {\n    return fetch(`${baseurl}/locations`).then((r) => r.json());\n  },\n  getAllEvents() {\n    return fetch(`${baseurl}/events`).then((r) => r.json());\n  },\n  postEntry(newEntry) {\n    return fetch(`${baseurl}/entries`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Token ${token}`,\n      },\n      body: JSON.stringify(newEntry),\n    }).then((r) => r.json());\n  },\n  register(userToPost) {\n    return fetch(`${baseurl}/register/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userToPost),\n    }).then((result) => result.json());\n  },\n  login(userToLogin) {\n    return fetch(`${baseurl}/login/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(userToLogin),\n    }).then((result) => result.json());\n  },\n};\n"]},"metadata":{},"sourceType":"module"}